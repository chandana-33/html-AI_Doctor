<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SWAASHTHYA.AI â€” Healthcare for Every Indian</title>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --brand-orange: #FF6B35;
  --brand-green: #00C853;
  --brand-sky: #00B4D8;
  --brand-deep: #023E8A;
  --brand-teal: #0077B6;
  --neon-cyan: #00F5FF;
  --neon-green: #39FF14;
  --neon-orange: #FF6B00;
  --gold: #FFD60A;
  --white: #FFFFFF;
  --bg-dark: #050d1a;
  --bg-card: rgba(0,70,120,0.25);
  --text-primary: #E0F4FF;
  --text-secondary: #90CAF9;
  --border: rgba(0,180,216,0.3);
  --shadow: 0 8px 32px rgba(0,180,216,0.15);
  --radius: 16px;
  --font-head: 'Exo 2', sans-serif;
  --font-body: 'Nunito', sans-serif;
}
[data-theme="light"] {
  --bg-dark: #e8f4ff;
  --bg-card: rgba(255,255,255,0.7);
  --text-primary: #023E8A;
  --text-secondary: #0077B6;
  --border: rgba(0,119,182,0.3);
  --shadow: 0 8px 32px rgba(0,119,182,0.15);
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: var(--font-body);
  color: var(--text-primary);
  background: var(--bg-dark);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ===== ANIMATED BACKGROUND ===== */
#bg-canvas {
  position: fixed; top:0; left:0; width:100%; height:100%;
  z-index: 0; pointer-events: none;
}
.bg-overlay {
  position: fixed; top:0; left:0; width:100%; height:100%;
  z-index: 0; pointer-events: none;
}
.landing-bg {
  background: linear-gradient(135deg, #0a1628 0%, #1a0a08 40%, #0a1628 70%, #081a10 100%);
}
.inner-bg {
  background: linear-gradient(135deg, #050d1a 0%, #021628 50%, #050d1a 100%);
}

/* Floating medical icons */
.medical-icons-bg {
  position: fixed; top:0; left:0; width:100%; height:100%;
  z-index: 1; pointer-events: none; overflow: hidden;
}
.med-icon {
  position: absolute;
  font-size: 2.5rem;
  opacity: 0.04;
  animation: floatIcon 20s infinite linear;
  filter: blur(0.5px);
  color: var(--neon-cyan);
}
.med-icon:nth-child(odd) { color: var(--brand-green); animation-duration: 25s; }
.med-icon:nth-child(3n) { color: var(--brand-orange); animation-duration: 18s; }
@keyframes floatIcon {
  0% { transform: translateY(110vh) rotate(0deg) scale(0.8); opacity:0; }
  10% { opacity: 0.06; }
  90% { opacity: 0.06; }
  100% { transform: translateY(-10vh) rotate(360deg) scale(1.2); opacity:0; }
}
.neon-line {
  position: fixed; height: 1px; width: 200px;
  background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
  opacity: 0.15;
  animation: scanLine 8s infinite linear;
  z-index: 1; pointer-events: none;
}
@keyframes scanLine {
  0% { top: -5px; left: -200px; }
  100% { top: 105vh; left: 110vw; }
}

/* ===== NAVBAR ===== */
#navbar {
  position: fixed; top:0; left:0; right:0; z-index:1000;
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 24px;
  background: rgba(5,13,26,0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 2px 20px rgba(0,180,216,0.1);
}
.nav-brand {
  display: flex; align-items: center; gap: 12px;
  text-decoration: none;
}
.nav-logo {
  width: 42px; height: 42px;
  background: linear-gradient(135deg, var(--brand-sky), var(--brand-green));
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.4rem;
  box-shadow: 0 0 15px rgba(0,180,216,0.5);
  animation: logoPulse 3s ease-in-out infinite;
}
@keyframes logoPulse {
  0%,100% { box-shadow: 0 0 15px rgba(0,180,216,0.5); }
  50% { box-shadow: 0 0 30px rgba(0,180,216,0.9), 0 0 60px rgba(0,200,83,0.3); }
}
.nav-title {
  font-family: var(--font-head);
  font-weight: 900;
  font-size: 1.3rem;
  background: linear-gradient(135deg, var(--neon-cyan), var(--brand-green));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: 1px;
}
.nav-subtitle {
  font-size: 0.65rem;
  color: var(--text-secondary);
  letter-spacing: 2px;
  text-transform: uppercase;
}
.nav-controls {
  display: flex; align-items: center; gap: 12px;
}
.lang-select {
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  color: var(--text-primary);
  padding: 6px 12px; border-radius: 8px;
  font-family: var(--font-body); font-size: 0.85rem; cursor: pointer;
}
.theme-toggle {
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  color: var(--text-primary);
  width: 36px; height: 36px;
  border-radius: 8px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem; transition: all 0.3s;
}
.theme-toggle:hover { background: rgba(0,180,216,0.3); transform: scale(1.1); }
.menu-btn {
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  color: var(--text-primary);
  width: 36px; height: 36px;
  border-radius: 8px; cursor: pointer;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 4px;
  transition: all 0.3s;
}
.menu-btn span {
  width: 4px; height: 4px; background: var(--brand-sky);
  border-radius: 50%; display: block;
}
.menu-btn:hover { background: rgba(0,180,216,0.3); }

/* ===== PAGE SYSTEM ===== */
.page { display: none; min-height: 100vh; padding-top: 70px; position: relative; z-index: 2; }
.page.active { display: block; }

/* ===== LANDING PAGE ===== */
#page-home {
  background: linear-gradient(135deg, rgba(255,107,53,0.1) 0%, rgba(0,200,83,0.1) 100%);
}
.hero {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; min-height: 90vh;
  text-align: center; padding: 40px 20px;
}
.hero-badge {
  display: inline-flex; align-items: center; gap: 8px;
  background: linear-gradient(135deg, rgba(255,107,53,0.2), rgba(0,200,83,0.2));
  border: 1px solid rgba(255,107,53,0.4);
  padding: 8px 20px; border-radius: 50px;
  font-size: 0.8rem; color: var(--brand-orange);
  margin-bottom: 24px; animation: badgePulse 2s ease-in-out infinite;
  letter-spacing: 1px; text-transform: uppercase;
}
@keyframes badgePulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(255,107,53,0.3); }
  50% { box-shadow: 0 0 20px 5px rgba(255,107,53,0.2); }
}
.hero-title {
  font-family: var(--font-head);
  font-size: clamp(2.5rem, 6vw, 5rem);
  font-weight: 900;
  line-height: 1.1;
  margin-bottom: 20px;
}
.hero-title span.orange {
  background: linear-gradient(135deg, var(--brand-orange), var(--gold));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.hero-title span.green {
  background: linear-gradient(135deg, var(--brand-green), var(--neon-green));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.hero-sub {
  font-size: clamp(1rem, 2vw, 1.3rem);
  color: var(--text-secondary);
  max-width: 700px; line-height: 1.7; margin-bottom: 40px;
}
.hero-cta {
  display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;
}
.btn-primary {
  background: linear-gradient(135deg, var(--brand-orange), #FF8C00);
  color: white; border: none; padding: 14px 32px;
  border-radius: 50px; font-size: 1rem; font-weight: 700;
  cursor: pointer; transition: all 0.3s;
  box-shadow: 0 4px 20px rgba(255,107,53,0.4);
  font-family: var(--font-body);
}
.btn-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 30px rgba(255,107,53,0.6);
}
.btn-secondary {
  background: linear-gradient(135deg, var(--brand-sky), var(--brand-teal));
  color: white; border: none; padding: 14px 32px;
  border-radius: 50px; font-size: 1rem; font-weight: 700;
  cursor: pointer; transition: all 0.3s;
  box-shadow: 0 4px 20px rgba(0,180,216,0.4);
  font-family: var(--font-body);
}
.btn-secondary:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 30px rgba(0,180,216,0.6);
}
.btn-outline {
  background: transparent;
  color: var(--brand-green);
  border: 2px solid var(--brand-green);
  padding: 12px 28px; border-radius: 50px;
  font-size: 0.95rem; font-weight: 700;
  cursor: pointer; transition: all 0.3s;
  font-family: var(--font-body);
}
.btn-outline:hover {
  background: var(--brand-green); color: white;
  box-shadow: 0 4px 20px rgba(0,200,83,0.4);
}

/* Stats bar */
.stats-bar {
  display: flex; gap: 40px; flex-wrap: wrap;
  justify-content: center; margin-top: 60px;
  padding: 30px 40px;
  background: rgba(0,180,216,0.05);
  border: 1px solid var(--border);
  border-radius: 20px;
  backdrop-filter: blur(10px);
}
.stat-item { text-align: center; }
.stat-num {
  font-family: var(--font-head);
  font-size: 2rem; font-weight: 900;
  background: linear-gradient(135deg, var(--neon-cyan), var(--brand-green));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.stat-label { font-size: 0.8rem; color: var(--text-secondary); }

/* Feature grid */
.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px; padding: 40px 24px;
  max-width: 1400px; margin: 0 auto;
}
.feature-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  cursor: pointer;
  transition: all 0.3s;
  backdrop-filter: blur(10px);
  position: relative; overflow: hidden;
}
.feature-card::before {
  content: '';
  position: absolute; top:0; left:0; right:0; height:2px;
  background: linear-gradient(90deg, var(--brand-sky), var(--brand-green));
  opacity: 0; transition: opacity 0.3s;
}
.feature-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 20px 40px rgba(0,180,216,0.2);
  border-color: var(--brand-sky);
}
.feature-card:hover::before { opacity: 1; }
.feat-icon {
  font-size: 2.5rem; margin-bottom: 12px;
  display: block;
}
.feat-title {
  font-family: var(--font-head);
  font-size: 1rem; font-weight: 700;
  color: var(--text-primary); margin-bottom: 8px;
}
.feat-desc {
  font-size: 0.82rem; color: var(--text-secondary); line-height: 1.5;
}
.feat-badge {
  display: inline-block;
  background: rgba(0,200,83,0.15);
  color: var(--brand-green);
  font-size: 0.7rem; padding: 2px 8px;
  border-radius: 20px; margin-top: 8px;
  border: 1px solid rgba(0,200,83,0.3);
}

/* ===== NAV MENU (sidebar) ===== */
#side-menu {
  position: fixed; top:0; right:-300px; width:280px; height:100vh;
  background: rgba(5,13,26,0.97);
  border-left: 1px solid var(--border);
  backdrop-filter: blur(20px);
  z-index: 2000; transition: right 0.3s ease;
  padding: 80px 20px 20px;
  overflow-y: auto;
}
#side-menu.open { right:0; }
.menu-nav-item {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 16px; border-radius: 10px;
  color: var(--text-secondary); cursor: pointer;
  transition: all 0.2s; margin-bottom: 4px;
  font-size: 0.9rem;
}
.menu-nav-item:hover, .menu-nav-item.active {
  background: rgba(0,180,216,0.15);
  color: var(--brand-sky);
}
.menu-close {
  position: absolute; top:20px; right:20px;
  background: rgba(255,100,50,0.2); border: 1px solid rgba(255,100,50,0.4);
  color: var(--brand-orange); width:36px; height:36px;
  border-radius: 8px; cursor: pointer; font-size: 1.1rem;
  display: flex; align-items: center; justify-content: center;
}
#menu-overlay {
  display: none; position: fixed; inset: 0; z-index: 1999;
  background: rgba(0,0,0,0.5); backdrop-filter: blur(2px);
}
#menu-overlay.open { display: block; }

/* ===== INNER PAGE STYLES ===== */
.page-header {
  text-align: center; padding: 40px 20px 20px;
  background: linear-gradient(180deg, rgba(0,100,180,0.15) 0%, transparent 100%);
  border-bottom: 1px solid var(--border);
  margin-bottom: 30px;
}
.page-title {
  font-family: var(--font-head);
  font-size: clamp(1.8rem,4vw,3rem);
  font-weight: 900;
  background: linear-gradient(135deg, var(--neon-cyan), var(--brand-green));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.page-subtitle { font-size: 0.95rem; color: var(--text-secondary); margin-top: 8px; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 20px 60px; }

/* ===== CHATBOT ===== */
#page-chatbot { background: linear-gradient(135deg, rgba(0,50,100,0.2) 0%, rgba(0,100,50,0.1) 100%); }
.chatbot-container {
  max-width: 800px; margin: 0 auto; padding: 0 20px 40px;
}
.chat-window {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  height: 500px; overflow-y: auto;
  padding: 20px;
  display: flex; flex-direction: column; gap: 16px;
  backdrop-filter: blur(10px);
}
.chat-msg {
  display: flex; gap: 10px; align-items: flex-start;
  animation: msgIn 0.3s ease;
}
@keyframes msgIn {
  from { opacity:0; transform: translateY(10px); }
  to { opacity:1; transform: translateY(0); }
}
.chat-msg.user { flex-direction: row-reverse; }
.chat-avatar {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem; flex-shrink: 0;
}
.bot-avatar { background: linear-gradient(135deg, var(--brand-sky), var(--brand-teal)); }
.user-avatar { background: linear-gradient(135deg, var(--brand-orange), var(--gold)); }
.chat-bubble {
  max-width: 70%; padding: 12px 16px; border-radius: 16px;
  font-size: 0.9rem; line-height: 1.6;
}
.bot-bubble {
  background: rgba(0,180,216,0.15);
  border: 1px solid rgba(0,180,216,0.3);
  border-top-left-radius: 4px;
}
.user-bubble {
  background: rgba(255,107,53,0.15);
  border: 1px solid rgba(255,107,53,0.3);
  border-top-right-radius: 4px;
}
.chat-input-area {
  display: flex; gap: 10px; margin-top: 16px;
}
.chat-input {
  flex: 1; background: var(--bg-card);
  border: 1px solid var(--border);
  color: var(--text-primary); padding: 12px 16px;
  border-radius: 50px; font-family: var(--font-body);
  font-size: 0.9rem; outline: none;
}
.chat-input:focus { border-color: var(--brand-sky); }
.chat-btn {
  width: 44px; height: 44px; border-radius: 50%;
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem; transition: all 0.2s;
}
.send-btn {
  background: linear-gradient(135deg, var(--brand-sky), var(--brand-teal));
  color: white;
}
.voice-btn {
  background: linear-gradient(135deg, var(--brand-orange), #FF8C00);
  color: white;
}
.chat-btn:hover { transform: scale(1.1); }
.typing-indicator {
  display: flex; gap: 6px; padding: 12px 16px;
  background: rgba(0,180,216,0.1); border-radius: 16px;
  width: fit-content;
}
.typing-dot {
  width: 8px; height: 8px; background: var(--brand-sky);
  border-radius: 50%; animation: typingBounce 1.4s infinite;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce {
  0%,60%,100% { transform: translateY(0); }
  30% { transform: translateY(-10px); }
}
.quick-replies {
  display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;
}
.quick-btn {
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  color: var(--text-primary);
  padding: 6px 14px; border-radius: 20px;
  font-size: 0.8rem; cursor: pointer; transition: all 0.2s;
}
.quick-btn:hover { background: rgba(0,180,216,0.3); border-color: var(--brand-sky); }
.lang-indicator {
  text-align: center; font-size: 0.75rem;
  color: var(--text-secondary); margin-bottom: 10px;
}

/* ===== SYMPTOM TRIAGE ===== */
.triage-form {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 30px; backdrop-filter: blur(10px);
}
.form-group { margin-bottom: 20px; }
.form-label {
  display: block; font-size: 0.85rem; font-weight: 600;
  color: var(--text-secondary); margin-bottom: 8px;
  text-transform: uppercase; letter-spacing: 1px;
}
.form-input, .form-select, .form-textarea {
  width: 100%; background: rgba(0,30,60,0.5);
  border: 1px solid var(--border);
  color: var(--text-primary); padding: 12px 16px;
  border-radius: 10px; font-family: var(--font-body);
  font-size: 0.9rem; outline: none; transition: all 0.2s;
}
.form-input:focus, .form-select:focus, .form-textarea:focus {
  border-color: var(--brand-sky);
  box-shadow: 0 0 0 3px rgba(0,180,216,0.15);
}
.form-select option { background: #050d1a; }
.symptom-tags {
  display: flex; flex-wrap: wrap; gap: 8px;
}
.symptom-tag {
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  color: var(--text-secondary);
  padding: 6px 14px; border-radius: 20px;
  font-size: 0.8rem; cursor: pointer; transition: all 0.2s;
}
.symptom-tag.selected {
  background: rgba(0,180,216,0.3);
  border-color: var(--brand-sky);
  color: var(--neon-cyan);
}
.result-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius); padding: 24px;
  margin-top: 20px; display: none;
  backdrop-filter: blur(10px);
}
.result-card.show { display: block; }
.risk-meter {
  height: 12px; border-radius: 6px; overflow: hidden;
  background: rgba(255,255,255,0.1); margin: 12px 0;
}
.risk-fill {
  height: 100%; border-radius: 6px;
  transition: width 1s ease;
  background: linear-gradient(90deg, var(--brand-green), var(--gold), var(--brand-orange));
}
.risk-label {
  font-family: var(--font-head); font-size: 1.5rem; font-weight: 700;
}
.risk-low { color: var(--brand-green); }
.risk-medium { color: var(--gold); }
.risk-high { color: var(--brand-orange); }

/* ===== BMI CALC ===== */
.bmi-display {
  display: flex; align-items: center; justify-content: center;
  width: 160px; height: 160px;
  border-radius: 50%; margin: 20px auto;
  background: conic-gradient(var(--brand-sky) 0deg, transparent 0deg);
  position: relative;
}
.bmi-inner {
  width: 120px; height: 120px; border-radius: 50%;
  background: var(--bg-dark);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
}
.bmi-val {
  font-family: var(--font-head); font-size: 2rem; font-weight: 900;
}
.bmi-cat { font-size: 0.75rem; color: var(--text-secondary); }

/* ===== APPOINTMENT ===== */
.calendar-grid {
  display: grid; grid-template-columns: repeat(7, 1fr);
  gap: 6px; margin: 16px 0;
}
.cal-day {
  aspect-ratio: 1; display: flex; align-items: center;
  justify-content: center; border-radius: 8px;
  font-size: 0.85rem; cursor: pointer; transition: all 0.2s;
  border: 1px solid transparent;
}
.cal-day:hover { background: rgba(0,180,216,0.2); border-color: var(--brand-sky); }
.cal-day.today { background: rgba(0,200,83,0.2); border-color: var(--brand-green); color: var(--brand-green); font-weight: 700; }
.cal-day.selected { background: var(--brand-sky); color: white; font-weight: 700; }
.cal-day.empty { cursor: default; }
.time-slots {
  display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;
}
.time-slot {
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  padding: 8px 16px; border-radius: 8px;
  font-size: 0.85rem; cursor: pointer; transition: all 0.2s;
}
.time-slot:hover { background: rgba(0,180,216,0.3); border-color: var(--brand-sky); }
.time-slot.selected { background: var(--brand-sky); color: white; border-color: var(--brand-sky); }
.time-slot.booked { opacity: 0.4; cursor: not-allowed; }
.doctor-cards {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 16px; margin: 16px 0;
}
.doctor-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px; cursor: pointer; transition: all 0.3s;
  text-align: center;
}
.doctor-card:hover { border-color: var(--brand-sky); transform: translateY(-4px); }
.doctor-card.selected { border-color: var(--brand-sky); background: rgba(0,180,216,0.2); }
.doctor-avatar {
  width: 64px; height: 64px; border-radius: 50%;
  background: linear-gradient(135deg, var(--brand-sky), var(--brand-teal));
  display: flex; align-items: center; justify-content: center;
  font-size: 2rem; margin: 0 auto 10px;
}
.doctor-name { font-weight: 700; font-size: 0.9rem; }
.doctor-spec { font-size: 0.75rem; color: var(--brand-sky); }
.doctor-rating { font-size: 0.8rem; color: var(--gold); margin-top: 4px; }

/* ===== HEALTH CHECKS ===== */
.health-grid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
}
.health-meter-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius); padding: 24px;
  text-align: center; backdrop-filter: blur(10px);
  transition: all 0.3s;
}
.health-meter-card:hover { border-color: var(--brand-sky); transform: translateY(-3px); }
.meter-icon { font-size: 2.5rem; margin-bottom: 12px; }
.meter-value {
  font-family: var(--font-head);
  font-size: 2.5rem; font-weight: 900;
}
.meter-unit { font-size: 0.8rem; color: var(--text-secondary); }
.pulse-ring {
  position: relative; display: inline-block;
}
.pulse-ring::after {
  content: '';
  position: absolute; inset: -6px; border-radius: 50%;
  border: 2px solid var(--brand-sky);
  animation: pulseRing 1.5s ease-out infinite;
}
@keyframes pulseRing {
  0% { transform: scale(0.8); opacity: 1; }
  100% { transform: scale(1.4); opacity: 0; }
}
.bpm-display {
  font-size: 3rem; font-weight: 900;
  font-family: var(--font-head);
  color: var(--brand-orange);
  animation: bpmPulse 0.8s ease-in-out infinite;
}
@keyframes bpmPulse {
  0%,100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* ===== MAPS ===== */
.map-placeholder {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  height: 400px; display: flex;
  align-items: center; justify-content: center;
  flex-direction: column; gap: 16px;
  font-size: 3rem; color: var(--text-secondary);
  position: relative; overflow: hidden;
  backdrop-filter: blur(10px);
}
.map-grid {
  position: absolute; inset: 0; opacity: 0.05;
  background-image: 
    linear-gradient(var(--brand-sky) 1px, transparent 1px),
    linear-gradient(90deg, var(--brand-sky) 1px, transparent 1px);
  background-size: 40px 40px;
}
.map-dot {
  position: absolute; width: 12px; height: 12px;
  background: var(--brand-orange); border-radius: 50%;
  animation: mapPulse 2s ease-in-out infinite;
}
@keyframes mapPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(255,107,53,0.4); }
  50% { box-shadow: 0 0 0 20px rgba(255,107,53,0); }
}
.hospital-list {
  display: flex; flex-direction: column; gap: 12px; margin-top: 16px;
}
.hospital-item {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px; padding: 16px;
  display: flex; gap: 16px; align-items: center;
  transition: all 0.2s; cursor: pointer;
}
.hospital-item:hover { border-color: var(--brand-sky); transform: translateX(4px); }
.hosp-icon {
  width: 48px; height: 48px; border-radius: 12px;
  background: linear-gradient(135deg, var(--brand-sky), var(--brand-teal));
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem; flex-shrink: 0;
}
.hosp-name { font-weight: 700; font-size: 0.95rem; }
.hosp-dist { font-size: 0.8rem; color: var(--brand-sky); }
.hosp-open { font-size: 0.75rem; }
.hosp-open.open { color: var(--brand-green); }
.hosp-open.closed { color: var(--brand-orange); }

/* ===== RECIPES ===== */
.recipe-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 20px;
}
.recipe-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius); overflow: hidden;
  transition: all 0.3s; cursor: pointer;
  backdrop-filter: blur(10px);
}
.recipe-card:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,180,216,0.2); }
.recipe-img {
  height: 160px; display: flex; align-items: center;
  justify-content: center; font-size: 4rem;
  position: relative; overflow: hidden;
}
.recipe-img-overlay {
  position: absolute; inset: 0;
  background: linear-gradient(180deg, transparent 50%, rgba(5,13,26,0.8) 100%);
}
.recipe-body { padding: 16px; }
.recipe-title { font-weight: 700; font-size: 0.95rem; margin-bottom: 6px; }
.recipe-meta { display: flex; gap: 12px; font-size: 0.75rem; color: var(--text-secondary); }
.recipe-tag {
  display: inline-block;
  background: rgba(0,200,83,0.15);
  color: var(--brand-green); font-size: 0.7rem;
  padding: 2px 8px; border-radius: 20px;
  border: 1px solid rgba(0,200,83,0.3); margin-top: 8px;
}

/* ===== ALERTS & TRENDS ===== */
.alert-card {
  border-radius: var(--radius); padding: 20px; margin-bottom: 16px;
  display: flex; gap: 16px; align-items: flex-start;
  backdrop-filter: blur(10px);
}
.alert-danger { background: rgba(220,50,50,0.15); border: 1px solid rgba(220,50,50,0.4); }
.alert-warning { background: rgba(255,170,0,0.15); border: 1px solid rgba(255,170,0,0.4); }
.alert-info { background: rgba(0,180,216,0.15); border: 1px solid rgba(0,180,216,0.4); }
.alert-success { background: rgba(0,200,83,0.15); border: 1px solid rgba(0,200,83,0.4); }
.alert-icon { font-size: 2rem; flex-shrink: 0; }
.trend-chart {
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 20px; margin-top: 20px;
}
.chart-bars {
  display: flex; align-items: flex-end;
  gap: 8px; height: 150px;
}
.chart-bar {
  flex: 1; border-radius: 4px 4px 0 0;
  background: linear-gradient(180deg, var(--brand-sky), var(--brand-teal));
  transition: height 1s ease; min-width: 20px;
  position: relative; cursor: pointer;
}
.chart-bar:hover { background: linear-gradient(180deg, var(--neon-cyan), var(--brand-sky)); }
.chart-bar::after {
  content: attr(data-val);
  position: absolute; top: -20px; left: 50%;
  transform: translateX(-50%);
  font-size: 0.7rem; color: var(--text-secondary);
  white-space: nowrap;
}

/* ===== MATERNAL CARE ===== */
.preg-week-track {
  display: flex; gap: 4px; flex-wrap: wrap; margin: 16px 0;
}
.week-dot {
  width: 28px; height: 28px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.65rem; font-weight: 700;
  background: rgba(0,180,216,0.1);
  border: 1px solid var(--border);
  cursor: pointer; transition: all 0.2s;
}
.week-dot.completed { background: rgba(0,200,83,0.3); border-color: var(--brand-green); color: var(--brand-green); }
.week-dot.current {
  background: linear-gradient(135deg, var(--brand-orange), var(--gold));
  border-color: var(--gold); color: white;
  box-shadow: 0 0 15px rgba(255,107,53,0.5);
  animation: currentWeek 1.5s ease-in-out infinite;
}
@keyframes currentWeek {
  0%,100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

/* ===== EYE HEALTH ===== */
.eye-test {
  text-align: center; padding: 40px;
  background: var(--bg-card); border: 1px solid var(--border);
  border-radius: var(--radius); backdrop-filter: blur(10px);
}
.snellen-chart {
  font-family: 'Courier New', monospace;
  line-height: 1.8; margin: 20px auto; max-width: 300px;
  text-align: center;
}
.snellen-row { letter-spacing: 4px; }

/* ===== WEATHER HEALTH ===== */
.weather-widget {
  background: linear-gradient(135deg, rgba(0,100,200,0.3), rgba(0,50,100,0.2));
  border: 1px solid var(--border); border-radius: var(--radius);
  padding: 30px; text-align: center; position: relative; overflow: hidden;
  backdrop-filter: blur(10px);
}
.weather-temp {
  font-family: var(--font-head);
  font-size: 5rem; font-weight: 900;
  background: linear-gradient(135deg, var(--neon-cyan), var(--brand-sky));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.weather-icon { font-size: 4rem; animation: weatherFloat 3s ease-in-out infinite; }
@keyframes weatherFloat {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

/* ===== PRESCRIPTION ===== */
.upload-zone {
  border: 2px dashed var(--border);
  border-radius: var(--radius); padding: 40px;
  text-align: center; cursor: pointer;
  transition: all 0.3s; position: relative;
}
.upload-zone:hover, .upload-zone.dragover {
  border-color: var(--brand-sky);
  background: rgba(0,180,216,0.05);
}
.upload-icon { font-size: 3rem; color: var(--text-secondary); margin-bottom: 12px; }

/* ===== MEDICINE DELIVERY ===== */
.delivery-tracker {
  display: flex; justify-content: space-between;
  margin: 20px 0; position: relative;
}
.delivery-tracker::before {
  content: '';
  position: absolute; top: 20px; left: 10%; right: 10%;
  height: 2px; background: linear-gradient(90deg, var(--brand-green), var(--brand-sky));
}
.tracker-step {
  display: flex; flex-direction: column; align-items: center;
  gap: 8px; z-index: 1;
}
.tracker-dot {
  width: 40px; height: 40px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.2rem; background: var(--bg-dark);
  border: 2px solid var(--border);
  transition: all 0.3s;
}
.tracker-dot.active {
  background: linear-gradient(135deg, var(--brand-green), var(--neon-green));
  border-color: var(--brand-green);
  box-shadow: 0 0 20px rgba(0,200,83,0.5);
  animation: trackerPulse 1.5s ease-in-out infinite;
}
@keyframes trackerPulse {
  0%,100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}
.tracker-label { font-size: 0.7rem; color: var(--text-secondary); text-align: center; }

/* ===== NOTIFICATIONS / REMINDERS ===== */
.reminder-list {
  display: flex; flex-direction: column; gap: 12px;
}
.reminder-item {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-left: 4px solid var(--brand-sky);
  border-radius: 12px; padding: 16px;
  display: flex; justify-content: space-between; align-items: center;
  backdrop-filter: blur(10px); transition: all 0.2s;
}
.reminder-item:hover { transform: translateX(4px); }
.reminder-item.med { border-left-color: var(--brand-orange); }
.reminder-item.appt { border-left-color: var(--brand-green); }
.toggle-switch {
  width: 44px; height: 24px; background: rgba(255,255,255,0.1);
  border-radius: 12px; position: relative; cursor: pointer;
  transition: background 0.3s;
}
.toggle-switch.on { background: var(--brand-green); }
.toggle-knob {
  position: absolute; top: 2px; left: 2px;
  width: 20px; height: 20px; background: white;
  border-radius: 50%; transition: transform 0.3s;
}
.toggle-switch.on .toggle-knob { transform: translateX(20px); }

/* ===== HEALTH SESSIONS ===== */
.session-cards {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
}
.session-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius); overflow: hidden;
  transition: all 0.3s; cursor: pointer;
  backdrop-filter: blur(10px);
}
.session-card:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,180,216,0.2); }
.session-thumb {
  height: 140px; background: linear-gradient(135deg, rgba(0,50,100,0.6), rgba(0,100,50,0.4));
  display: flex; align-items: center; justify-content: center;
  font-size: 3rem; position: relative;
}
.live-badge {
  position: absolute; top: 12px; right: 12px;
  background: #dc2626; color: white;
  padding: 3px 10px; border-radius: 20px;
  font-size: 0.7rem; font-weight: 700;
  animation: livePulse 1.5s ease-in-out infinite;
  letter-spacing: 1px;
}
@keyframes livePulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(220,38,38,0.4); }
  50% { box-shadow: 0 0 0 8px rgba(220,38,38,0); }
}
.session-info { padding: 16px; }
.session-title { font-weight: 700; margin-bottom: 6px; }
.session-meta { font-size: 0.8rem; color: var(--text-secondary); }

/* ===== FOOTER ===== */
footer {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 100;
  background: rgba(5,13,26,0.9);
  border-top: 1px solid var(--border);
  backdrop-filter: blur(20px);
  padding: 10px 24px;
  display: flex; justify-content: space-between; align-items: center;
  font-size: 0.75rem;
}
.footer-contact { color: var(--text-secondary); }
.footer-contact a { color: var(--brand-sky); text-decoration: none; }
.footer-brand {
  background: linear-gradient(135deg, var(--brand-orange), var(--gold));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  font-weight: 700;
}

/* ===== BOTTOM NAV (mobile) ===== */
.bottom-nav {
  display: none; position: fixed; bottom: 44px; left: 0; right: 0;
  background: rgba(5,13,26,0.95);
  border-top: 1px solid var(--border);
  padding: 8px; z-index: 99; gap: 4px;
  backdrop-filter: blur(20px);
  justify-content: space-around;
}
@media(max-width:640px) {
  .bottom-nav { display: flex; }
  footer { display: none; }
  .bottom-nav-show { padding-bottom: 80px; }
}
.bnav-btn {
  display: flex; flex-direction: column; align-items: center;
  gap: 3px; padding: 8px; border-radius: 10px;
  cursor: pointer; transition: all 0.2s; border: none;
  background: transparent; color: var(--text-secondary);
  font-size: 0.6rem;
}
.bnav-btn.active, .bnav-btn:hover { background: rgba(0,180,216,0.15); color: var(--brand-sky); }
.bnav-icon { font-size: 1.2rem; }

/* ===== MISC UTILITIES ===== */
.section-title {
  font-family: var(--font-head);
  font-size: 1.5rem; font-weight: 700; margin-bottom: 20px;
  display: flex; align-items: center; gap: 10px;
}
.section-title::after {
  content: '';
  flex: 1; height: 1px;
  background: linear-gradient(90deg, var(--border), transparent);
}
.badge {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 12px; border-radius: 20px; font-size: 0.75rem;
}
.badge-blue { background: rgba(0,180,216,0.15); color: var(--brand-sky); border: 1px solid rgba(0,180,216,0.3); }
.badge-green { background: rgba(0,200,83,0.15); color: var(--brand-green); border: 1px solid rgba(0,200,83,0.3); }
.badge-orange { background: rgba(255,107,53,0.15); color: var(--brand-orange); border: 1px solid rgba(255,107,53,0.3); }
.badge-red { background: rgba(220,38,38,0.15); color: #ef4444; border: 1px solid rgba(220,38,38,0.3); }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
@media(max-width:768px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }
.mb-8 { margin-bottom: 8px; }
.mb-16 { margin-bottom: 16px; }
.mb-24 { margin-bottom: 24px; }
.text-center { text-align: center; }
.text-small { font-size: 0.8rem; color: var(--text-secondary); }
.divider { height: 1px; background: var(--border); margin: 24px 0; }
.chip {
  display: inline-block; background: rgba(0,180,216,0.1);
  border: 1px solid var(--border); color: var(--text-secondary);
  padding: 4px 10px; border-radius: 20px; font-size: 0.75rem;
  margin: 3px;
}
.success-msg {
  background: rgba(0,200,83,0.15); border: 1px solid rgba(0,200,83,0.4);
  border-radius: 10px; padding: 16px; margin-top: 16px;
  display: none; animation: slideIn 0.3s ease;
}
.success-msg.show { display: block; }
@keyframes slideIn {
  from { opacity:0; transform: translateY(-10px); }
  to { opacity:1; transform: translateY(0); }
}
.permission-banner {
  background: rgba(255,107,53,0.1); border: 1px solid rgba(255,107,53,0.3);
  border-radius: 10px; padding: 12px 16px; margin-bottom: 16px;
  font-size: 0.85rem; display: flex; align-items: center; gap: 10px;
}
.progress-bar {
  height: 8px; border-radius: 4px;
  background: rgba(255,255,255,0.1); overflow: hidden; margin: 8px 0;
}
.progress-fill {
  height: 100%; border-radius: 4px;
  background: linear-gradient(90deg, var(--brand-sky), var(--brand-green));
  transition: width 0.5s ease;
}
.disclaimer {
  background: rgba(255,200,0,0.05); border: 1px solid rgba(255,200,0,0.2);
  border-radius: 10px; padding: 14px; margin: 16px 0;
  font-size: 0.82rem; color: var(--gold);
}
.two-col { display: flex; gap: 24px; flex-wrap: wrap; }
.two-col > * { flex: 1; min-width: 280px; }
.loading-spinner {
  width: 32px; height: 32px; border-radius: 50%;
  border: 3px solid rgba(0,180,216,0.2);
  border-top-color: var(--brand-sky);
  animation: spin 0.8s linear infinite; margin: 0 auto;
}
@keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>

<!-- ANIMATED BACKGROUND ICONS -->
<div class="medical-icons-bg" id="medIcons"></div>
<div class="neon-line" style="animation-delay:0s;transform:rotate(30deg)"></div>
<div class="neon-line" style="animation-delay:4s;transform:rotate(-20deg)"></div>

<!-- ===== NAVBAR ===== -->
<nav id="navbar">
  <a class="nav-brand" href="#" onclick="showPage('home')">
    <div class="nav-logo">âš•ï¸</div>
    <div>
      <div class="nav-title">SWAASHTHYA.AI</div>
      <div class="nav-subtitle">Healthcare for Every Indian</div>
    </div>
  </a>
  <div class="nav-controls">
    <select class="lang-select" id="langSelect" onchange="changeLanguage(this.value)">
      <option value="en">ğŸ‡¬ğŸ‡§ English</option>
      <option value="te">ğŸ‡®ğŸ‡³ à°¤à±†à°²à±à°—à±</option>
      <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤‚à¤¦à¥€</option>
      <option value="ta">ğŸ‡®ğŸ‡³ à®¤à®®à®¿à®´à¯</option>
      <option value="kn">ğŸ‡®ğŸ‡³ à²•à²¨à³à²¨à²¡</option>
    </select>
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">ğŸŒ™</button>
    <button class="menu-btn" onclick="toggleMenu()" title="Menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<!-- SIDE MENU -->
<div id="menu-overlay" onclick="toggleMenu()"></div>
<div id="side-menu">
  <button class="menu-close" onclick="toggleMenu()">âœ•</button>
  <div style="font-family:var(--font-head);font-weight:700;font-size:1rem;color:var(--brand-sky);margin-bottom:20px;padding:0 16px;">Navigation</div>
  <div class="menu-nav-item" onclick="showPage('home');toggleMenu()">ğŸ  Home</div>
  <div class="menu-nav-item" onclick="showPage('chatbot');toggleMenu()">ğŸ¤– AI CareBot</div>
  <div class="menu-nav-item" onclick="showPage('triage');toggleMenu()">ğŸ©º Symptom Check</div>
  <div class="menu-nav-item" onclick="showPage('appointment');toggleMenu()">ğŸ“… Book Appointment</div>
  <div class="menu-nav-item" onclick="showPage('prescription');toggleMenu()">ğŸ’Š Prescriptions</div>
  <div class="menu-nav-item" onclick="showPage('bmi');toggleMenu()">âš–ï¸ BMI Calculator</div>
  <div class="menu-nav-item" onclick="showPage('health');toggleMenu()">â¤ï¸ Health Checks</div>
  <div class="menu-nav-item" onclick="showPage('reminders');toggleMenu()">â° Reminders</div>
  <div class="menu-nav-item" onclick="showPage('delivery');toggleMenu()">ğŸšš Medicine Delivery</div>
  <div class="menu-nav-item" onclick="showPage('maps');toggleMenu()">ğŸ—ºï¸ Nearby Hospitals</div>
  <div class="menu-nav-item" onclick="showPage('recipes');toggleMenu()">ğŸ¥— Healthy Recipes</div>
  <div class="menu-nav-item" onclick="showPage('sessions');toggleMenu()">ğŸ¥ Health Sessions</div>
  <div class="menu-nav-item" onclick="showPage('eye');toggleMenu()">ğŸ‘ï¸ Eye Health</div>
  <div class="menu-nav-item" onclick="showPage('maternal');toggleMenu()">ğŸ¤± Maternal Care</div>
  <div class="menu-nav-item" onclick="showPage('tips');toggleMenu()">ğŸ’¡ Health Tips</div>
  <div class="menu-nav-item" onclick="showPage('trends');toggleMenu()">ğŸ“Š Disease Trends</div>
  <div class="menu-nav-item" onclick="showPage('weather');toggleMenu()">ğŸŒ¤ï¸ Weather Health</div>
  <div class="divider"></div>
  <div style="padding:0 16px;font-size:0.8rem;color:var(--text-secondary)">
    <div>ğŸ“§ chandana@gmail.com</div>
    <div style="margin-top:6px;color:var(--brand-orange)">Invented by WebQuad Team</div>
  </div>
</div>

<!-- ===== PAGE: HOME ===== -->
<div id="page-home" class="page active">
  <div class="hero">
    <div class="hero-badge">ğŸŒŸ AI-Powered Rural Healthcare Platform</div>
    <h1 class="hero-title" id="hero-heading">
      <span class="orange">à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯</span> for <span class="green">Every Village</span>
    </h1>
    <p class="hero-sub" id="hero-desc">
      Bridging the urban-rural healthcare gap with AI. Early symptom triage, telemedicine, multilingual support â€” accessible to every Indian, everywhere.
    </p>
    <div class="hero-cta">
      <button class="btn-primary" onclick="showPage('chatbot')">ğŸ’¬ Talk to CareBot</button>
      <button class="btn-secondary" onclick="showPage('triage')">ğŸ©º Check Symptoms</button>
      <button class="btn-outline" onclick="showPage('appointment')">ğŸ“… Book Doctor</button>
    </div>
    <div class="stats-bar">
      <div class="stat-item"><div class="stat-num" id="cnt1">0</div><div class="stat-label">Users Helped</div></div>
      <div class="stat-item"><div class="stat-num" id="cnt2">0</div><div class="stat-label">Consultations</div></div>
      <div class="stat-item"><div class="stat-num" id="cnt3">0</div><div class="stat-label">Villages Covered</div></div>
      <div class="stat-item"><div class="stat-num" id="cnt4">0</div><div class="stat-label">Doctors Online</div></div>
    </div>
  </div>
  <div class="container">
    <div class="section-title">âš¡ 20 Smart Health Features</div>
    <div class="features-grid" id="featGrid"></div>
  </div>
</div>

<!-- ===== PAGE: CHATBOT ===== -->
<div id="page-chatbot" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ¤– AI CareBot</div>
    <div class="page-subtitle">Your 24/7 multilingual health assistant â€” powered by AI, grounded in medical knowledge</div>
  </div>
  <div class="chatbot-container">
    <div class="disclaimer">âš ï¸ CareBot provides general health information only. It does NOT replace professional medical advice. Always consult a qualified doctor for diagnosis and treatment.</div>
    <div class="lang-indicator" id="chatLangInfo">ğŸŒ Speaking in: <strong>English</strong> | ğŸ¤ Voice input available</div>
    <div class="chat-window" id="chatWindow"></div>
    <div class="quick-replies">
      <button class="quick-btn" onclick="sendQuick('I have a fever and headache')">ğŸ¤’ Fever & Headache</button>
      <button class="quick-btn" onclick="sendQuick('Stomach pain for 2 days')">ğŸ˜£ Stomach Pain</button>
      <button class="quick-btn" onclick="sendQuick('How to control diabetes?')">ğŸ©¸ Diabetes Tips</button>
      <button class="quick-btn" onclick="sendQuick('Find nearest hospital')">ğŸ¥ Find Hospital</button>
      <button class="quick-btn" onclick="sendQuick('Baby has cough and cold')">ğŸ‘¶ Baby Cough</button>
      <button class="quick-btn" onclick="sendQuick('What medicines for BP?')">ğŸ’Š BP Medicines</button>
    </div>
    <div class="chat-input-area">
      <input type="text" class="chat-input" id="chatInput" placeholder="Type your health question..." onkeydown="if(event.key==='Enter') sendChat()">
      <button class="chat-btn voice-btn" id="voiceBtn" onclick="toggleVoice()" title="Voice input">ğŸ¤</button>
      <button class="chat-btn send-btn" onclick="sendChat()" title="Send">â¤</button>
    </div>
  </div>
</div>

<!-- ===== PAGE: SYMPTOM TRIAGE ===== -->
<div id="page-triage" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ©º AI Symptom Triage</div>
    <div class="page-subtitle">Describe your symptoms â€” get an instant AI-powered risk assessment and specialist referral</div>
  </div>
  <div class="container">
    <div class="disclaimer">âš ï¸ This tool is for informational purposes ONLY. It cannot diagnose diseases. Please consult a doctor for proper medical advice.</div>
    <div class="two-col">
      <div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Your Age</label>
            <input type="number" class="form-input" id="triageAge" placeholder="Enter your age" min="1" max="120">
          </div>
          <div class="form-group">
            <label class="form-label">Gender</label>
            <select class="form-select" id="triageGender">
              <option value="">Select Gender</option>
              <option value="M">Male</option>
              <option value="F">Female</option>
              <option value="O">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Duration of Symptoms</label>
            <select class="form-select" id="triageDuration">
              <option value="1">Less than 24 hours</option>
              <option value="2">1â€“3 days</option>
              <option value="3">3â€“7 days</option>
              <option value="4">More than 1 week</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Select Symptoms (choose all that apply)</label>
            <div class="symptom-tags" id="symptomTags"></div>
          </div>
          <div class="form-group">
            <label class="form-label">Known Conditions</label>
            <select class="form-select" id="triageConditions" multiple style="height:100px">
              <option>Diabetes</option>
              <option>Hypertension</option>
              <option>Heart Disease</option>
              <option>Asthma</option>
              <option>Thyroid</option>
              <option>None</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Describe your symptoms in detail</label>
            <textarea class="form-textarea" id="triageDesc" rows="3" placeholder="E.g., sharp chest pain starting 2 hours ago..."></textarea>
          </div>
          <button class="btn-primary" style="width:100%" onclick="runTriage()">ğŸ” Analyze Symptoms</button>
        </div>
      </div>
      <div>
        <div class="result-card" id="triageResult">
          <div class="section-title">ğŸ“‹ Assessment Result</div>
          <div style="margin-bottom:16px;">
            <div class="text-small mb-8">Risk Level</div>
            <div class="risk-label" id="riskLabel">â€”</div>
            <div class="risk-meter"><div class="risk-fill" id="riskFill" style="width:0%"></div></div>
          </div>
          <div class="divider"></div>
          <div style="margin-bottom:12px;">
            <div class="text-small mb-8">ğŸ¥ Recommended Action</div>
            <div id="riskAction" style="font-size:0.9rem;line-height:1.6"></div>
          </div>
          <div class="divider"></div>
          <div style="margin-bottom:12px;">
            <div class="text-small mb-8">ğŸ‘¨â€âš•ï¸ Suggested Specialist</div>
            <div id="riskSpec" style="font-size:0.9rem"></div>
          </div>
          <div class="divider"></div>
          <div>
            <div class="text-small mb-8">ğŸ’¡ Self-Care Tips</div>
            <div id="riskTips" style="font-size:0.85rem;color:var(--text-secondary);line-height:1.7"></div>
          </div>
          <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn-secondary" onclick="showPage('appointment')">ğŸ“… Book Doctor</button>
            <button class="btn-outline" onclick="showPage('chatbot')">ğŸ’¬ Ask CareBot</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: APPOINTMENT ===== -->
<div id="page-appointment" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ“… Book Appointment</div>
    <div class="page-subtitle">Connect with specialist doctors â€” online or in-person, at your convenience</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Select Specialty</label>
            <select class="form-select" id="apptSpec" onchange="loadDoctors()">
              <option value="">â€” Choose Specialty â€”</option>
              <option>General Physician</option>
              <option>Cardiologist</option>
              <option>Pediatrician</option>
              <option>Gynecologist</option>
              <option>Orthopedist</option>
              <option>Dermatologist</option>
              <option>Neurologist</option>
              <option>Diabetologist</option>
              <option>ENT Specialist</option>
              <option>Ophthalmologist</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Available Doctors</label>
            <div class="doctor-cards" id="doctorCards">
              <div class="text-small" style="color:var(--text-secondary);padding:20px;text-align:center">Select a specialty to see doctors</div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Select Date</label>
            <div id="calHeader" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
              <button onclick="prevMonth()" style="background:none;border:1px solid var(--border);color:var(--text-primary);padding:4px 10px;border-radius:6px;cursor:pointer">â€¹</button>
              <span id="calTitle" style="font-weight:700"></span>
              <button onclick="nextMonth()" style="background:none;border:1px solid var(--border);color:var(--text-primary);padding:4px 10px;border-radius:6px;cursor:pointer">â€º</button>
            </div>
            <div style="display:grid;grid-template-columns:repeat(7,1fr);gap:2px;margin-bottom:8px;text-align:center;font-size:0.7rem;color:var(--text-secondary)">
              <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
            </div>
            <div class="calendar-grid" id="calGrid"></div>
          </div>
          <div class="form-group">
            <label class="form-label">Select Time Slot</label>
            <div class="time-slots" id="timeSlots"></div>
          </div>
          <div class="form-group">
            <label class="form-label">Consultation Type</label>
            <div style="display:flex;gap:10px">
              <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="radio" name="consult" value="online" checked> Online (Video)</label>
              <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="radio" name="consult" value="inperson"> In-Person</label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Patient Name</label>
            <input class="form-input" id="patientName" placeholder="Enter your name">
          </div>
          <div class="form-group">
            <label class="form-label">Phone Number</label>
            <input class="form-input" id="patientPhone" placeholder="+91 XXXXXXXXXX" type="tel">
          </div>
          <button class="btn-primary" style="width:100%" onclick="bookAppointment()">âœ… Confirm Booking</button>
        </div>
      </div>
      <div>
        <div class="triage-form">
          <div class="section-title">ğŸ“‹ Your Bookings</div>
          <div id="myBookings">
            <div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">No appointments yet</div>
          </div>
        </div>
      </div>
    </div>
    <div class="success-msg" id="apptSuccess">âœ… Appointment booked successfully! You'll receive a confirmation SMS. An appointment reminder has been set.</div>
  </div>
</div>

<!-- ===== PAGE: PRESCRIPTION ===== -->
<div id="page-prescription" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ’Š Digital Prescriptions & Reports</div>
    <div class="page-subtitle">Upload medical documents â€” AI reads and explains them in simple language</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="section-title">ğŸ“¤ Upload Document</div>
        <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()" ondragover="handleDragOver(event)" ondrop="handleDrop(event)">
          <div class="upload-icon">ğŸ“„</div>
          <div style="font-size:1rem;font-weight:600;margin-bottom:8px">Drag & drop or click to upload</div>
          <div class="text-small">Supports: JPG, PNG, PDF, HEIC | Max 10MB</div>
          <div class="text-small" style="margin-top:8px;color:var(--brand-sky)">ğŸ”’ Encrypted & secure</div>
          <input type="file" id="fileInput" accept=".jpg,.jpeg,.png,.pdf,.heic" style="display:none" onchange="handleFileUpload(event)">
        </div>
        <div style="margin-top:16px;display:flex;gap:10px">
          <button class="btn-secondary" onclick="openCamera()">ğŸ“· Use Camera</button>
          <button class="btn-outline" onclick="loadSampleReport()">ğŸ“‹ Load Sample</button>
        </div>
        <div id="uploadPreview" style="margin-top:16px;display:none">
          <div class="triage-form">
            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
              <div style="font-size:2rem">ğŸ“„</div>
              <div>
                <div id="fileName" style="font-weight:600"></div>
                <div id="fileSize" class="text-small"></div>
              </div>
            </div>
            <div style="margin-bottom:12px">
              <div class="text-small mb-8">OCR Processing...</div>
              <div class="progress-bar"><div class="progress-fill" id="ocrProgress" style="width:0%"></div></div>
            </div>
            <div id="ocrResult" style="display:none">
              <div class="text-small mb-8">ğŸ“ Extracted Text</div>
              <div style="background:rgba(0,0,0,0.3);padding:12px;border-radius:8px;font-size:0.8rem;font-family:monospace;line-height:1.6;max-height:200px;overflow-y:auto" id="ocrText"></div>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="section-title">ğŸ¤– AI Explanation</div>
        <div id="prescExplanation" class="triage-form" style="min-height:300px">
          <div class="text-small" style="text-align:center;padding:40px;color:var(--text-secondary)">Upload a prescription or report to get a simple AI explanation</div>
        </div>
        <div class="section-title" style="margin-top:24px">ğŸ“‚ Uploaded Documents</div>
        <div id="docList">
          <div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">No documents uploaded yet</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: BMI ===== -->
<div id="page-bmi" class="page">
  <div class="page-header">
    <div class="page-title">âš–ï¸ BMI Calculator & Health Plan</div>
    <div class="page-subtitle">Calculate your BMI and get a personalized diet + exercise plan</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Height (cm)</label>
            <input type="number" class="form-input" id="bmiHeight" placeholder="e.g. 165" min="50" max="250" oninput="updateBMI()">
          </div>
          <div class="form-group">
            <label class="form-label">Weight (kg)</label>
            <input type="number" class="form-input" id="bmiWeight" placeholder="e.g. 68" min="1" max="300" oninput="updateBMI()">
          </div>
          <div class="form-group">
            <label class="form-label">Age</label>
            <input type="number" class="form-input" id="bmiAge" placeholder="e.g. 35" min="1" max="120" oninput="updateBMI()">
          </div>
          <div class="form-group">
            <label class="form-label">Activity Level</label>
            <select class="form-select" id="bmiActivity" onchange="updateBMI()">
              <option value="sedentary">Sedentary (desk job)</option>
              <option value="light">Light (walks sometimes)</option>
              <option value="moderate">Moderate (exercises 3x/week)</option>
              <option value="active">Active (exercises daily)</option>
              <option value="very_active">Very Active (intense daily)</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Goal</label>
            <select class="form-select" id="bmiGoal" onchange="updateBMI()">
              <option value="maintain">Maintain Weight</option>
              <option value="lose">Lose Weight</option>
              <option value="gain">Gain Weight</option>
            </select>
          </div>
        </div>
      </div>
      <div>
        <div class="triage-form" id="bmiResult">
          <div class="text-center">
            <div class="bmi-display" id="bmiCircle">
              <div class="bmi-inner">
                <div class="bmi-val" id="bmiVal">â€”</div>
                <div class="bmi-cat" id="bmiCat">Enter data</div>
              </div>
            </div>
          </div>
          <div id="bmiInfo" style="margin-top:16px"></div>
          <div id="dietPlan" style="margin-top:16px"></div>
          <div id="exercisePlan" style="margin-top:16px"></div>
          <div id="calorieInfo" style="margin-top:16px"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: HEALTH CHECKS ===== -->
<div id="page-health" class="page">
  <div class="page-header">
    <div class="page-title">â¤ï¸ Basic Health Checks</div>
    <div class="page-subtitle">Monitor your vital signs â€” algorithm-based estimation with smart sensors</div>
  </div>
  <div class="container">
    <div class="disclaimer">âš ï¸ These readings are algorithm-based estimates, NOT clinical measurements. Use medical-grade devices for accurate readings.</div>
    <div class="health-grid">
      <div class="health-meter-card">
        <div class="meter-icon">â¤ï¸</div>
        <div class="text-small mb-8">Heart Rate</div>
        <div class="bpm-display" id="hrVal">72</div>
        <div class="meter-unit">BPM</div>
        <div class="text-small" id="hrStatus" style="margin-top:8px;color:var(--brand-green)">Normal</div>
        <button class="btn-secondary" style="margin-top:12px;padding:8px 16px;font-size:0.8rem" onclick="simulateHR()">ğŸ“· Measure via Camera</button>
      </div>
      <div class="health-meter-card">
        <div class="meter-icon">ğŸ©º</div>
        <div class="text-small mb-8">Blood Pressure</div>
        <div class="meter-value" id="bpVal" style="font-size:1.8rem;color:var(--brand-sky)">120/80</div>
        <div class="meter-unit">mmHg</div>
        <div class="text-small" id="bpStatus" style="margin-top:8px;color:var(--brand-green)">Normal</div>
        <div class="form-group" style="margin-top:12px">
          <input type="number" class="form-input" id="bpSys" placeholder="Systolic" style="margin-bottom:8px" oninput="checkBP()">
          <input type="number" class="form-input" id="bpDia" placeholder="Diastolic" oninput="checkBP()">
        </div>
      </div>
      <div class="health-meter-card">
        <div class="meter-icon">ğŸ©¸</div>
        <div class="text-small mb-8">Blood Sugar (Fasting)</div>
        <div class="meter-value" id="bsVal" style="color:var(--brand-green)">95</div>
        <div class="meter-unit">mg/dL</div>
        <div class="text-small" id="bsStatus" style="margin-top:8px;color:var(--brand-green)">Normal Range</div>
        <div class="form-group" style="margin-top:12px">
          <input type="number" class="form-input" id="bsInput" placeholder="Enter value" oninput="checkBS()">
          <select class="form-select" id="bsType" style="margin-top:8px" onchange="checkBS()">
            <option value="fasting">Fasting</option>
            <option value="pp">Post-Meal (PP)</option>
            <option value="random">Random</option>
          </select>
        </div>
      </div>
      <div class="health-meter-card">
        <div class="meter-icon">ğŸš¶</div>
        <div class="text-small mb-8">Daily Steps</div>
        <div class="meter-value" id="stepsVal" style="color:var(--brand-orange)">0</div>
        <div class="meter-unit">steps today</div>
        <div class="progress-bar" style="margin:12px 0">
          <div class="progress-fill" id="stepsFill" style="width:0%"></div>
        </div>
        <div class="text-small" id="stepsStatus">Goal: 10,000 steps</div>
        <button class="btn-outline" style="margin-top:12px;padding:8px 16px;font-size:0.8rem" onclick="startStepCounter()">ğŸ‘Ÿ Start Tracking</button>
      </div>
      <div class="health-meter-card">
        <div class="meter-icon">ğŸŒ¡ï¸</div>
        <div class="text-small mb-8">Body Temperature</div>
        <div class="meter-value" id="tempVal" style="color:var(--brand-sky)">â€”</div>
        <div class="meter-unit">Â°F</div>
        <div class="form-group" style="margin-top:12px">
          <input type="number" class="form-input" id="tempInput" placeholder="e.g. 98.6" step="0.1" oninput="checkTemp()">
          <select class="form-select" id="tempUnit" style="margin-top:8px" onchange="checkTemp()">
            <option value="F">Fahrenheit (Â°F)</option>
            <option value="C">Celsius (Â°C)</option>
          </select>
        </div>
        <div class="text-small" id="tempStatus" style="margin-top:8px"></div>
      </div>
      <div class="health-meter-card">
        <div class="meter-icon">ğŸ’¨</div>
        <div class="text-small mb-8">SpO2 (Oxygen)</div>
        <div class="meter-value" id="spo2Val" style="color:var(--neon-cyan)">98%</div>
        <div class="meter-unit">Blood Oxygen</div>
        <div style="margin-top:12px;font-size:0.8rem;color:var(--text-secondary);line-height:1.5">
          Normal: 95â€“100%<br>Below 90%: Seek help<br>
        </div>
        <button class="btn-secondary" style="margin-top:12px;padding:8px 16px;font-size:0.8rem" onclick="simulateSPO2()">ğŸ”´ Simulate Measurement</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: REMINDERS ===== -->
<div id="page-reminders" class="page">
  <div class="page-header">
    <div class="page-title">â° Medicine & Appointment Reminders</div>
    <div class="page-subtitle">Never miss a dose or appointment again</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="section-title">â• Add Reminder</div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Type</label>
            <select class="form-select" id="remType">
              <option value="med">Medicine</option>
              <option value="appt">Appointment</option>
              <option value="checkup">Health Checkup</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Name</label>
            <input class="form-input" id="remName" placeholder="e.g. Metformin 500mg">
          </div>
          <div class="form-group">
            <label class="form-label">Time</label>
            <input type="time" class="form-input" id="remTime">
          </div>
          <div class="form-group">
            <label class="form-label">Frequency</label>
            <select class="form-select" id="remFreq">
              <option>Daily</option>
              <option>Twice daily</option>
              <option>Weekly</option>
              <option>Once</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Notification via</label>
            <div style="display:flex;gap:16px;margin-top:8px">
              <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="notifBrowser" checked> Browser</label>
              <label style="display:flex;align-items:center;gap:6px;cursor:pointer"><input type="checkbox" id="notifSMS"> SMS</label>
            </div>
          </div>
          <button class="btn-primary" style="width:100%" onclick="addReminder()">â• Add Reminder</button>
        </div>
      </div>
      <div>
        <div class="section-title">ğŸ“‹ Active Reminders</div>
        <div class="reminder-list" id="reminderList">
          <div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">No reminders yet</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: MEDICINE DELIVERY ===== -->
<div id="page-delivery" class="page">
  <div class="page-header">
    <div class="page-title">ğŸšš Medicine Delivery</div>
    <div class="page-subtitle">Order medicines â€” nearest pharmacy delivers in under 10 minutes</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Search Medicine</label>
            <input class="form-input" id="medSearch" placeholder="e.g. Paracetamol 500mg" oninput="searchMedicines()">
          </div>
          <div id="medResults" style="margin-top:8px"></div>
          <div style="margin-top:16px">
            <div class="section-title">ğŸ›’ Cart</div>
            <div id="cartItems">
              <div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">Cart is empty</div>
            </div>
            <div id="cartTotal" style="display:none;margin-top:12px;padding:12px;background:rgba(0,180,216,0.1);border-radius:8px">
              <div style="display:flex;justify-content:space-between;font-weight:700">
                <span>Total:</span><span id="totalAmt">â‚¹0</span>
              </div>
              <button class="btn-primary" style="width:100%;margin-top:12px" onclick="placeOrder()">ğŸ“¦ Place Order</button>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="section-title">ğŸª Nearest Pharmacies</div>
        <div id="pharmacyList"></div>
        <div class="section-title" style="margin-top:24px">ğŸ“¦ Order Tracking</div>
        <div id="orderTracking" style="display:none">
          <div class="delivery-tracker">
            <div class="tracker-step"><div class="tracker-dot active" id="t1">âœ…</div><div class="tracker-label">Order Placed</div></div>
            <div class="tracker-step"><div class="tracker-dot" id="t2">ğŸ’Š</div><div class="tracker-label">Preparing</div></div>
            <div class="tracker-step"><div class="tracker-dot" id="t3">ğŸ›µ</div><div class="tracker-label">On the Way</div></div>
            <div class="tracker-step"><div class="tracker-dot" id="t4">ğŸ </div><div class="tracker-label">Delivered</div></div>
          </div>
          <div id="etaDisplay" style="text-align:center;font-family:var(--font-head);font-size:1.5rem;color:var(--neon-cyan);margin-top:12px"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: MAPS ===== -->
<div id="page-maps" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ—ºï¸ Nearby Hospitals & Clinics</div>
    <div class="page-subtitle">Find the nearest healthcare facility with navigation support</div>
  </div>
  <div class="container">
    <div class="form-group" style="display:flex;gap:10px;flex-wrap:wrap">
      <input class="form-input" id="mapSearch" placeholder="Search by name or area..." style="flex:1" oninput="filterHospitals()">
      <select class="form-select" id="hospType" style="width:180px" onchange="filterHospitals()">
        <option value="">All Types</option>
        <option value="govt">Government</option>
        <option value="private">Private</option>
        <option value="ayush">Ayush/ASHA</option>
        <option value="diagnostic">Diagnostic</option>
      </select>
      <button class="btn-secondary" onclick="useMyLocation()">ğŸ“ Use My Location</button>
    </div>
    <div class="map-placeholder">
      <div class="map-grid"></div>
      <div class="map-dot" style="top:40%;left:45%"></div>
      <div class="map-dot" style="top:30%;left:60%;animation-delay:0.5s;background:var(--brand-sky)"></div>
      <div class="map-dot" style="top:55%;left:35%;animation-delay:1s;background:var(--brand-green)"></div>
      <div class="map-dot" style="top:25%;left:30%;animation-delay:1.5s;background:var(--gold)"></div>
      <div style="z-index:1;text-align:center">
        <div style="font-size:3rem">ğŸ—ºï¸</div>
        <div style="font-size:0.9rem;color:var(--text-secondary);margin-top:8px">Interactive Map</div>
        <div style="font-size:0.8rem;color:var(--text-secondary)">Connect Google Maps API for live navigation</div>
        <button class="btn-secondary" style="margin-top:12px" onclick="openMapLink()">ğŸ§­ Open in Google Maps</button>
      </div>
    </div>
    <div class="hospital-list" id="hospitalList"></div>
  </div>
</div>

<!-- ===== PAGE: RECIPES ===== -->
<div id="page-recipes" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ¥— Healthy Cooking & Recipes</div>
    <div class="page-subtitle">Nutritious Indian recipes for every health condition â€” cook your way to wellness</div>
  </div>
  <div class="container">
    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:24px">
      <input class="form-input" id="recipeSearch" placeholder="Search recipes..." style="flex:1" oninput="filterRecipes()">
      <select class="form-select" id="recipeFilter" style="width:160px" onchange="filterRecipes()">
        <option value="">All Conditions</option>
        <option value="diabetes">Diabetic Friendly</option>
        <option value="bp">Low BP/Hypertension</option>
        <option value="heart">Heart Healthy</option>
        <option value="weight">Weight Loss</option>
        <option value="pregnancy">Pregnancy</option>
        <option value="anemia">Anemia</option>
      </select>
    </div>
    <div class="recipe-grid" id="recipeGrid"></div>
  </div>
</div>

<!-- ===== PAGE: SESSIONS ===== -->
<div id="page-sessions" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ¥ Doctor Health Sessions</div>
    <div class="page-subtitle">Live and recorded health education sessions by qualified doctors</div>
  </div>
  <div class="container">
    <div style="display:flex;gap:10px;margin-bottom:24px;flex-wrap:wrap">
      <select class="form-select" style="width:160px">
        <option>All Specialties</option>
        <option>Cardiology</option>
        <option>Diabetes</option>
        <option>Child Health</option>
        <option>Women Health</option>
        <option>Mental Health</option>
      </select>
      <select class="form-select" style="width:140px">
        <option>All Languages</option>
        <option>English</option>
        <option>Telugu</option>
        <option>Hindi</option>
        <option>Tamil</option>
      </select>
    </div>
    <div class="session-cards" id="sessionCards"></div>
    <div class="section-title" style="margin-top:32px">ğŸ“ Register for a Session</div>
    <div class="triage-form" style="max-width:500px">
      <div class="form-group">
        <label class="form-label">Your Name</label>
        <input class="form-input" id="sessName" placeholder="Enter name">
      </div>
      <div class="form-group">
        <label class="form-label">Phone</label>
        <input class="form-input" id="sessPhone" placeholder="+91 XXXXXXXXXX">
      </div>
      <div class="form-group">
        <label class="form-label">Select Session</label>
        <select class="form-select" id="sessSelect">
          <option>Live: Understanding Diabetes â€” Dr. Rao</option>
          <option>Live: Heart Health Basics â€” Dr. Sharma</option>
          <option>Recorded: Child Nutrition â€” Dr. Priya</option>
          <option>Live: Women's Health â€” Dr. Ananya</option>
        </select>
      </div>
      <button class="btn-primary" onclick="registerSession()">ğŸ“ Register Now</button>
      <div class="success-msg" id="sessSuccess">âœ… Successfully registered! You'll receive a link on your phone.</div>
    </div>
  </div>
</div>

<!-- ===== PAGE: EYE HEALTH ===== -->
<div id="page-eye" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ‘ï¸ Eye Health & Screen Time</div>
    <div class="page-subtitle">Protect your vision â€” screen time tracking and simple eye tests</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="section-title">â±ï¸ Screen Time Tracker</div>
        <div class="triage-form">
          <div style="text-align:center;margin-bottom:20px">
            <div id="screenTimer" style="font-family:var(--font-head);font-size:3rem;font-weight:900;color:var(--brand-sky)">00:00:00</div>
            <div class="text-small" style="margin-top:4px">Session screen time</div>
          </div>
          <div id="screenWarning" style="display:none" class="alert-card alert-warning">
            <div class="alert-icon">âš ï¸</div>
            <div>
              <strong>Screen Time Alert!</strong><br>
              <span class="text-small">You've been looking at the screen for over 20 minutes. Take a break â€” follow the 20-20-20 rule: look at something 20 feet away for 20 seconds.</span>
            </div>
          </div>
          <div class="section-title" style="margin-top:16px">ğŸ“‹ 20-20-20 Rule</div>
          <div class="text-small" style="line-height:1.8;color:var(--text-secondary)">
            Every <strong style="color:var(--neon-cyan)">20 minutes</strong>, look at something <strong style="color:var(--neon-cyan)">20 feet</strong> away for <strong style="color:var(--neon-cyan)">20 seconds</strong>.<br>
            This reduces eye strain and prevents digital eye fatigue.
          </div>
          <div style="margin-top:16px;display:flex;gap:10px">
            <button class="btn-secondary" onclick="startEyeBreak()">ğŸ‘ï¸ Start 20s Break</button>
            <button class="btn-outline" onclick="resetScreenTime()">ğŸ”„ Reset Timer</button>
          </div>
          <div id="eyeBreakTimer" style="display:none;text-align:center;margin-top:16px">
            <div id="breakCountdown" style="font-family:var(--font-head);font-size:4rem;color:var(--brand-green)">20</div>
            <div class="text-small">Look away from screen</div>
          </div>
        </div>
      </div>
      <div>
        <div class="section-title">ğŸ”¤ Vision Test (Simplified Snellen)</div>
        <div class="eye-test">
          <div class="disclaimer" style="font-size:0.78rem">This is a simplified screening only. Visit an eye doctor for accurate examination.</div>
          <div class="snellen-chart" id="snellenChart">
            <div class="snellen-row" style="font-size:2.5rem">E</div>
            <div class="snellen-row" style="font-size:2rem">FP</div>
            <div class="snellen-row" style="font-size:1.6rem">TOZ</div>
            <div class="snellen-row" style="font-size:1.2rem">LPED</div>
            <div class="snellen-row" style="font-size:0.9rem">PECFD</div>
            <div class="snellen-row" style="font-size:0.75rem">EDFCZP</div>
          </div>
          <div class="form-group" style="margin-top:16px">
            <label class="form-label">What letters can you read? (Row number)</label>
            <input type="number" class="form-input" id="visionRow" placeholder="1-6" min="1" max="6" oninput="checkVision()">
          </div>
          <div id="visionResult" style="margin-top:12px"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: MATERNAL CARE ===== -->
<div id="page-maternal" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ¤± Baby & Maternal Care Assistant</div>
    <div class="page-subtitle">Pregnancy tracking, baby milestones, and maternal health guidance</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="section-title">ğŸ¤° Pregnancy Tracker</div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Last Menstrual Period (LMP)</label>
            <input type="date" class="form-input" id="lmpDate" onchange="calcPregnancy()">
          </div>
          <div id="pregResult" style="display:none">
            <div style="text-align:center;margin:16px 0">
              <div style="font-family:var(--font-head);font-size:3rem;color:var(--brand-orange)" id="weekNum">â€”</div>
              <div class="text-small">Weeks Pregnant</div>
              <div style="font-family:var(--font-head);font-size:1.5rem;color:var(--brand-sky);margin-top:4px" id="trimester">â€”</div>
            </div>
            <div>
              <div class="text-small mb-8">Progress</div>
              <div class="preg-week-track" id="pregWeeks"></div>
            </div>
            <div class="divider"></div>
            <div id="pregTips" style="font-size:0.85rem;line-height:1.7"></div>
          </div>
        </div>
      </div>
      <div>
        <div class="section-title">ğŸ‘¶ Baby Development Tracker</div>
        <div class="triage-form">
          <div class="form-group">
            <label class="form-label">Baby's Age</label>
            <div style="display:flex;gap:10px">
              <input type="number" class="form-input" id="babyMonths" placeholder="Months" min="0" max="60" oninput="updateBabyMilestones()">
              <input type="number" class="form-input" id="babyDays" placeholder="Days" min="0" max="30" oninput="updateBabyMilestones()">
            </div>
          </div>
          <div id="milestonesResult"></div>
        </div>
        <div class="section-title" style="margin-top:16px">ğŸŒ¸ Maternal Health Tips</div>
        <div id="maternalTipsList"></div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PAGE: TIPS ===== -->
<div id="page-tips" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ’¡ Daily Preventive Health Tips</div>
    <div class="page-subtitle">Simple health habits that save lives â€” personalized for you</div>
  </div>
  <div class="container">
    <div id="dailyTipOfDay" class="alert-card alert-info" style="margin-bottom:24px">
      <div class="alert-icon">â­</div>
      <div>
        <strong>Tip of the Day</strong><br>
        <span id="todayTip" class="text-small"></span>
      </div>
    </div>
    <div class="features-grid" id="tipsGrid"></div>
  </div>
</div>

<!-- ===== PAGE: TRENDS ===== -->
<div id="page-trends" class="page">
  <div class="page-header">
    <div class="page-title">ğŸ“Š Disease Trends & Outbreak Status</div>
    <div class="page-subtitle">Real-time disease surveillance â€” AI-powered outbreak prediction using ARIMA/LSTM models</div>
  </div>
  <div class="container">
    <div id="outbreakAlerts"></div>
    <div class="two-col">
      <div>
        <div class="section-title">ğŸ“ˆ Weekly Trend (Last 8 Weeks)</div>
        <div class="trend-chart">
          <div style="display:flex;justify-content:space-between;margin-bottom:16px">
            <select class="form-select" style="width:180px" id="trendDisease" onchange="updateTrend()">
              <option>Dengue Cases</option>
              <option>Malaria Cases</option>
              <option>COVID-19</option>
              <option>Influenza</option>
              <option>Typhoid</option>
              <option>Cholera</option>
            </select>
            <select class="form-select" style="width:160px" id="trendRegion">
              <option>Andhra Pradesh</option>
              <option>Telangana</option>
              <option>Karnataka</option>
              <option>Tamil Nadu</option>
              <option>Maharashtra</option>
            </select>
          </div>
          <div class="chart-bars" id="trendBars"></div>
          <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:0.7rem;color:var(--text-secondary)" id="weekLabels"></div>
        </div>
      </div>
      <div>
        <div class="section-title">ğŸ”® AI Outbreak Prediction</div>
        <div class="triage-form">
          <div class="text-small mb-8" style="color:var(--text-secondary)">Based on ARIMA/LSTM model using WHO + ICMR data</div>
          <div id="predictionResult"></div>
          <div class="divider"></div>
          <div class="section-title" style="font-size:1rem">ğŸŒ District Risk Map</div>
          <div id="districtRisk"></div>
        </div>
      </div>
    </div>
    <div style="margin-top:24px">
      <div class="section-title">ğŸ“° Latest Disease Bulletins</div>
      <div id="diseaseBulletins"></div>
    </div>
  </div>
</div>

<!-- ===== PAGE: WEATHER ===== -->
<div id="page-weather" class="page">
  <div class="page-header">
    <div class="page-title">ğŸŒ¤ï¸ Weather-Linked Health Alerts</div>
    <div class="page-subtitle">How today's weather affects your health â€” personalized risk alerts</div>
  </div>
  <div class="container">
    <div class="two-col">
      <div>
        <div class="weather-widget">
          <div class="weather-icon" id="weatherIcon">â˜€ï¸</div>
          <div class="weather-temp" id="weatherTemp">â€”Â°C</div>
          <div style="font-size:1rem;color:var(--text-secondary)" id="weatherDesc">Fetching weather...</div>
          <div style="display:flex;justify-content:center;gap:20px;margin-top:16px">
            <div><div style="font-size:1.2rem">ğŸ’§</div><div id="humidity" class="text-small">â€”% Humidity</div></div>
            <div><div style="font-size:1.2rem">ğŸ’¨</div><div id="windSpeed" class="text-small">â€” km/h Wind</div></div>
            <div><div style="font-size:1.2rem">ğŸŒ«ï¸</div><div id="airQuality" class="text-small">AQI â€”</div></div>
          </div>
          <button class="btn-secondary" style="margin-top:16px" onclick="fetchWeather()">ğŸ”„ Refresh Weather</button>
        </div>
      </div>
      <div>
        <div class="section-title">âš ï¸ Health Risks Today</div>
        <div id="weatherAlerts"></div>
      </div>
    </div>
    <div class="section-title" style="margin-top:24px">ğŸ“‹ Weekly Forecast Health Advisory</div>
    <div id="weeklyForecast"></div>
  </div>
</div>

<!-- ===== FOOTER ===== -->
<footer>
  <div class="footer-contact">
    ğŸ“ Contact: <strong>Chandana</strong> | <a href="mailto:chandana@gmail.com">chandana@gmail.com</a>
  </div>
  <div>
    <span class="footer-brand">âœ¨ Invented by WebQuad Team</span>
  </div>
</footer>

<!-- BOTTOM NAV (mobile) -->
<div class="bottom-nav">
  <button class="bnav-btn" onclick="showPage('home')"><div class="bnav-icon">ğŸ </div>Home</button>
  <button class="bnav-btn" onclick="showPage('chatbot')"><div class="bnav-icon">ğŸ¤–</div>CareBot</button>
  <button class="bnav-btn" onclick="showPage('triage')"><div class="bnav-icon">ğŸ©º</div>Check</button>
  <button class="bnav-btn" onclick="showPage('appointment')"><div class="bnav-icon">ğŸ“…</div>Book</button>
  <button class="bnav-btn" onclick="showPage('health')"><div class="bnav-icon">â¤ï¸</div>Health</button>
</div>

<script>
// ===== STATE =====
const STATE = {
  lang: 'en',
  theme: 'dark',
  cart: [],
  reminders: [],
  appointments: [],
  documents: [],
  calDate: new Date(),
  selectedDate: null,
  selectedTime: null,
  selectedDoctor: null,
  isListening: false,
  screenStartTime: Date.now(),
  stepCount: 0,
  recognition: null,
  synth: window.speechSynthesis
};

// ===== TRANSLATIONS =====
const T = {
  en: { hero_title: 'Health for Every Village', chatbot_title: 'Ask CareBot anything...', disclaimer: 'âš ï¸ For informational use only. Not a substitute for medical advice.', appName: 'SWAASHTHYA.AI' },
  te: { hero_title: 'à°ªà±à°°à°¤à°¿ à°—à±à°°à°¾à°®à°¾à°¨à°¿à°•à°¿ à°†à°°à±‹à°—à±à°¯à°‚', chatbot_title: 'CareBot à°¨à°¿ à°…à°¡à°—à°‚à°¡à°¿...', disclaimer: 'âš ï¸ à°¸à°®à°¾à°šà°¾à°°à°‚ à°®à°¾à°¤à±à°°à°®à±‡. à°µà±ˆà°¦à±à°¯ à°¸à°²à°¹à°¾à°•à± à°ªà±à°°à°¤à±à°¯à°¾à°®à±à°¨à°¾à°¯à°‚ à°•à°¾à°¦à±.', appName: 'à°¸à±à°µà°¾à°¸à±à°¥à±à°¯.AI' },
  hi: { hero_title: 'à¤¹à¤° à¤—à¤¾à¤‚à¤µ à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯', chatbot_title: 'CareBot à¤¸à¥‡ à¤ªà¥‚à¤›à¥‡à¤‚...', disclaimer: 'âš ï¸ à¤•à¥‡à¤µà¤² à¤¸à¥‚à¤šà¤¨à¤¾à¤¤à¥à¤®à¤•à¥¤ à¤šà¤¿à¤•à¤¿à¤¤à¥à¤¸à¥€à¤¯ à¤¸à¤²à¤¾à¤¹ à¤•à¤¾ à¤µà¤¿à¤•à¤²à¥à¤ª à¤¨à¤¹à¥€à¤‚à¥¤', appName: 'à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯.AI' },
  ta: { hero_title: 'à®’à®µà¯à®µà¯Šà®°à¯ à®•à®¿à®°à®¾à®®à®¤à¯à®¤à®¿à®±à¯à®•à¯à®®à¯ à®šà¯à®•à®¾à®¤à®¾à®°à®®à¯', chatbot_title: 'CareBot à®•à¯‡à®³à¯à®™à¯à®•à®³à¯...', disclaimer: 'âš ï¸ à®¤à®•à®µà®²à¯ à®®à®Ÿà¯à®Ÿà¯à®®à¯‡. à®®à®°à¯à®¤à¯à®¤à¯à®µ à®†à®²à¯‹à®šà®©à¯ˆà®•à¯à®•à¯ à®®à®¾à®±à¯à®±à®²à¯à®².', appName: 'à®šà¯à®µà®¾à®¸à¯à®¤à¯à®¯à®¾.AI' },
  kn: { hero_title: 'à²ªà³à²°à²¤à²¿ à²—à³à²°à²¾à²®à²•à³à²•à³‚ à²†à²°à³‹à²—à³à²¯', chatbot_title: 'CareBot à²—à³† à²•à³‡à²³à²¿...', disclaimer: 'âš ï¸ à²®à²¾à²¹à²¿à²¤à²¿ à²®à²¾à²¤à³à²°. à²µà³ˆà²¦à³à²¯à²•à³€à²¯ à²¸à²²à²¹à³†à²¯ à²¬à²¦à²²à³ à²…à²²à³à²².', appName: 'à²¸à³à²µà²¾à²¸à³à²¥à³à²¯.AI' }
};

// ===== CHATBOT RESPONSES =====
const CARE_RESPONSES = {
  fever: `Based on your symptoms, here's what CareBot suggests:\n\nğŸŒ¡ï¸ **Fever Management:**\nâ€¢ Stay hydrated â€” drink at least 8-10 glasses of water\nâ€¢ Take paracetamol (if not allergic) as per label instructions\nâ€¢ Rest in a cool, ventilated room\nâ€¢ Use a damp cloth on forehead\n\nâš ï¸ **Seek immediate care if:**\nâ€¢ Temperature > 103Â°F (39.4Â°C)\nâ€¢ Fever lasts > 3 days\nâ€¢ Difficulty breathing or severe headache\n\nğŸ¥ Nearest facility: Tap Maps to find doctors near you.`,
  stomach: `ğŸ¤¢ **Stomach Pain â€” Initial Assessment:**\n\nâ€¢ When did it start? Location matters (upper/lower/left/right)\nâ€¢ Common causes: Acidity, Gas, Food infection, IBS\n\nâœ… **Home Care:**\nâ€¢ Light diet â€” rice, banana, toast\nâ€¢ Avoid spicy/oily food\nâ€¢ ORS solution if diarrhea present\nâ€¢ Warm water bottle on abdomen\n\nâš ï¸ **Emergency Signs:**\nâ€¢ Severe, sudden pain\nâ€¢ Blood in stool\nâ€¢ High fever + pain\nâ†’ Please visit a doctor immediately.`,
  diabetes: `ğŸ©¸ **Diabetes Management Tips:**\n\n**Diet:**\nâ€¢ Low glycemic foods: brown rice, bitter gourd, fenugreek\nâ€¢ 5-6 small meals instead of 3 large\nâ€¢ Avoid white bread, sweets, sugary drinks\n\n**Exercise:**\nâ€¢ 30-minute walk daily\nâ€¢ Light yoga (Pranayam, Surya Namaskar)\n\n**Monitoring:**\nâ€¢ Check fasting sugar regularly\nâ€¢ Target: Fasting < 126 mg/dL\n\nğŸ’Š Never stop medications without consulting your doctor.`,
  hospital: `ğŸ¥ **Finding Hospitals Near You:**\n\nI've noted your request. Please:\n1. Go to Maps section (menu â†’ Nearby Hospitals)\n2. Allow location permission\n3. See hospitals within 5km\n\nğŸ“ Emergency: **108** (Free ambulance)\nğŸ“ Health Helpline: **104**\n\nAlt: Search ASHA worker or Anganwadi center in your village.`,
  baby: `ğŸ‘¶ **Baby Cough & Cold Care:**\n\n**For infants under 6 months:**\nâ€¢ Do NOT give any cold medicine\nâ€¢ Keep warm, use saline drops for nose\nâ€¢ Breastfeed frequently\n\n**For 6 months+:**\nâ€¢ Steam inhalation (supervised)\nâ€¢ Honey + ginger (only if > 1 year)\nâ€¢ Saline nasal drops\n\nâš ï¸ **See Doctor Immediately if:**\nâ€¢ Breathing difficulty / rapid breathing\nâ€¢ Fever > 38Â°C in infants\nâ€¢ Not feeding\nâ€¢ Bluish lips`,
  bp: `ğŸ’Š **Blood Pressure Medication Info:**\n\nâš ï¸ IMPORTANT: Only a doctor can prescribe BP medicines.\n\n**Common classes (for awareness):**\nâ€¢ ACE inhibitors: Enalapril, Ramipril\nâ€¢ Calcium channel blockers: Amlodipine\nâ€¢ Diuretics: Hydrochlorothiazide\nâ€¢ Beta blockers: Atenolol\n\n**Lifestyle measures:**\nâ€¢ Reduce salt intake\nâ€¢ 30-min daily walk\nâ€¢ Manage stress\nâ€¢ Avoid alcohol & smoking\n\nğŸ“‹ Consult your doctor before starting/changing any medication.`,
  default: `Hello! I'm CareBot â€” your AI health assistant. I can help with:\n\nğŸ©º Symptom assessment\nğŸ’Š Medicine information\nğŸ¥ Finding hospitals\nğŸ“… Booking appointments\nğŸ Diet & nutrition advice\nğŸ‘¶ Baby & maternal care\n\nPlease describe your health concern, and I'll do my best to help. Remember, I provide information only â€” always see a doctor for proper diagnosis.\n\nWhat's troubling you today?`
};

// ===== FEATURE DATA =====
const FEATURES = [
  { icon:'ğŸ¤–', title:'AI CareBot', desc:'24/7 multilingual AI health assistant with voice support', page:'chatbot', badge:'AI Powered' },
  { icon:'ğŸ©º', title:'Symptom Triage', desc:'AI risk scoring with specialist referral recommendations', page:'triage', badge:'ML Model' },
  { icon:'ğŸ“…', title:'Book Appointment', desc:'Specialty-based doctor booking with calendar management', page:'appointment', badge:'Telemedicine' },
  { icon:'ğŸ’Š', title:'Prescriptions & OCR', desc:'Upload & AI-explain medical reports and prescriptions', page:'prescription', badge:'OCR+AI' },
  { icon:'âš–ï¸', title:'BMI & Diet Planner', desc:'Calculate BMI, get personalized diet and exercise plan', page:'bmi', badge:'Nutrition' },
  { icon:'â¤ï¸', title:'Health Checks', desc:'BP, HR, blood sugar, steps â€” algorithm-based monitoring', page:'health', badge:'Vitals' },
  { icon:'â°', title:'Smart Reminders', desc:'Medicine and appointment reminders via SMS/notification', page:'reminders', badge:'SMS Alert' },
  { icon:'ğŸšš', title:'Medicine Delivery', desc:'Order medicines â€” nearest pharmacy delivers in 10 min', page:'delivery', badge:'10-Min Delivery' },
  { icon:'ğŸ—ºï¸', title:'Find Hospitals', desc:'Maps and navigation to nearby hospitals and clinics', page:'maps', badge:'GPS Navigation' },
  { icon:'ğŸ¥—', title:'Healthy Recipes', desc:'Nutritious Indian recipes for specific health conditions', page:'recipes', badge:'Nutrition' },
  { icon:'ğŸ¥', title:'Health Sessions', desc:'Live and recorded sessions by qualified doctors', page:'sessions', badge:'Live' },
  { icon:'ğŸ‘ï¸', title:'Eye Health', desc:'Screen time management and simplified vision test', page:'eye', badge:'Digital Wellness' },
  { icon:'ğŸ¤±', title:'Maternal Care', desc:'Pregnancy tracking, baby milestones, maternal tips', page:'maternal', badge:'Mother & Child' },
  { icon:'ğŸ’¡', title:'Daily Health Tips', desc:'Personalized preventive health tips every day', page:'tips', badge:'Prevention' },
  { icon:'ğŸ“Š', title:'Disease Trends', desc:'Outbreak surveillance with ARIMA/LSTM predictions', page:'trends', badge:'AI Prediction' },
  { icon:'ğŸŒ¤ï¸', title:'Weather Health', desc:'Weather-linked health risks and personalized alerts', page:'weather', badge:'Real-time' },
  { icon:'ğŸ“±', title:'Voice Support', desc:'Full voice input/output in 5 Indian languages', page:'chatbot', badge:'Multilingual' },
  { icon:'ğŸ“·', title:'Camera Upload', desc:'Capture and analyze prescriptions and reports', page:'prescription', badge:'Computer Vision' },
  { icon:'ğŸ¥', title:'Telemedicine', desc:'Connect with doctors via video from your village', page:'appointment', badge:'Remote Care' },
  { icon:'ğŸ”’', title:'Data Security', desc:'End-to-end encrypted, consent-first, HIPAA-aware', page:'home', badge:'Privacy First' }
];

const SYMPTOMS = ['Fever','Headache','Cough','Cold','Sore Throat','Chest Pain','Breathing Difficulty','Nausea','Vomiting','Diarrhea','Stomach Pain','Back Pain','Joint Pain','Fatigue','Dizziness','Rash','Eye Redness','Ear Pain','Toothache','Irregular Heartbeat'];

const DOCTORS = {
  'General Physician': [
    { name:'Dr. Ramesh Kumar', spec:'General Physician', rating:'â­ 4.8', exp:'12 yrs', icon:'ğŸ‘¨â€âš•ï¸' },
    { name:'Dr. Sunita Devi', spec:'General Physician', rating:'â­ 4.7', exp:'8 yrs', icon:'ğŸ‘©â€âš•ï¸' },
    { name:'Dr. Prabhaker Rao', spec:'General Physician', rating:'â­ 4.9', exp:'20 yrs', icon:'ğŸ‘¨â€âš•ï¸' }
  ],
  'Cardiologist': [
    { name:'Dr. Venkat Sharma', spec:'Cardiologist', rating:'â­ 4.9', exp:'18 yrs', icon:'ğŸ‘¨â€âš•ï¸' },
    { name:'Dr. Ananya Reddy', spec:'Cardiologist', rating:'â­ 4.8', exp:'14 yrs', icon:'ğŸ‘©â€âš•ï¸' }
  ],
  'Pediatrician': [
    { name:'Dr. Priya Nair', spec:'Pediatrician', rating:'â­ 4.9', exp:'10 yrs', icon:'ğŸ‘©â€âš•ï¸' },
    { name:'Dr. Vijay Krishnan', spec:'Pediatrician', rating:'â­ 4.7', exp:'15 yrs', icon:'ğŸ‘¨â€âš•ï¸' }
  ],
  'Gynecologist': [
    { name:'Dr. Lakshmi Patel', spec:'Gynecologist', rating:'â­ 4.9', exp:'16 yrs', icon:'ğŸ‘©â€âš•ï¸' },
    { name:'Dr. Meera Singh', spec:'Gynecologist', rating:'â­ 4.8', exp:'11 yrs', icon:'ğŸ‘©â€âš•ï¸' }
  ]
};

const HOSPITALS = [
  { name:'District Government Hospital', dist:'0.8 km', type:'govt', open:true, spec:['Emergency','General','Surgery'], icon:'ğŸ¥', phone:'08554-232323' },
  { name:'PHC Rajampet', dist:'1.2 km', type:'govt', open:true, spec:['General','Maternal'], icon:'ğŸ¥', phone:'08554-233455' },
  { name:'Apollo Clinic', dist:'2.1 km', type:'private', open:true, spec:['Multi-specialty'], icon:'ğŸ¥', phone:'040-23456789' },
  { name:'Care Hospital', dist:'3.5 km', type:'private', open:false, spec:['Cardiology','Ortho'], icon:'ğŸ¥', phone:'040-30410000' },
  { name:'AYUSH Health Centre', dist:'0.5 km', type:'ayush', open:true, spec:['Ayurveda','Homeopathy'], icon:'ğŸŒ¿', phone:'08554-234567' },
  { name:'Srinivasa Diagnostic Lab', dist:'1.8 km', type:'diagnostic', open:true, spec:['Lab','Imaging'], icon:'ğŸ”¬', phone:'08554-245678' }
];

const MEDICINES = [
  { name:'Paracetamol 500mg', price:12, stock:true, desc:'Fever & pain relief, 10 tablets' },
  { name:'Crocin Advance', price:28, stock:true, desc:'Fast fever relief, 15 tablets' },
  { name:'ORS Sachet (Electral)', price:10, stock:true, desc:'Rehydration salts, 5 sachets' },
  { name:'Azithromycin 250mg', price:65, stock:true, desc:'Antibiotic (prescription required)' },
  { name:'Metformin 500mg', price:42, stock:true, desc:'Diabetes management, 10 tablets' },
  { name:'Amlodipine 5mg', price:38, stock:true, desc:'Blood pressure control, 10 tablets' },
  { name:'Vitamin D3 1000IU', price:85, stock:false, desc:'Bone & immunity supplement' },
  { name:'Cetirizine 10mg', price:22, stock:true, desc:'Allergy relief, 10 tablets' }
];

const PHARMACIES = [
  { name:'MedPlus Pharmacy', dist:'0.3 km', time:'7 min', open:true },
  { name:'Apollo Pharmacy', dist:'0.8 km', time:'10 min', open:true },
  { name:'Jan Aushadhi Kendra', dist:'1.2 km', time:'15 min', open:true }
];

const RECIPES = [
  { name:'Methi Dal (Fenugreek Lentils)', cat:'diabetes', time:'30 min', cals:180, icon:'ğŸ¥˜', color:'#1a3a1a', benefit:'Lowers blood sugar, high fiber' },
  { name:'Beetroot Soup', cat:'bp', time:'20 min', cals:95, icon:'ğŸ²', color:'#3a1a2a', benefit:'Reduces BP, rich in nitrates' },
  { name:'Palak Paneer (Spinach)', cat:'anemia', time:'25 min', cals:220, icon:'ğŸ¥¬', color:'#1a2a1a', benefit:'High iron, protein-rich' },
  { name:'Oats Upma', cat:'heart', time:'15 min', cals:150, icon:'ğŸ¥£', color:'#2a2a1a', benefit:'Reduces cholesterol, heart-healthy' },
  { name:'Moong Dal Khichdi', cat:'weight', time:'25 min', cals:160, icon:'ğŸ«˜', color:'#2a1a3a', benefit:'Low-calorie, high protein' },
  { name:'Dahi Chana Salad', cat:'pregnancy', time:'10 min', cals:200, icon:'ğŸ¥—', color:'#1a2a3a', benefit:'Calcium, folate for pregnancy' },
  { name:'Karela Sabzi (Bitter Gourd)', cat:'diabetes', time:'20 min', cals:80, icon:'ğŸ¥’', color:'#1a3a1a', benefit:'Natural insulin-like effect' },
  { name:'Turmeric Milk (Haldi Doodh)', cat:'heart', time:'5 min', cals:120, icon:'ğŸ¥›', color:'#3a2a1a', benefit:'Anti-inflammatory, immunity boost' },
  { name:'Sabudana Khichdi', cat:'pregnancy', time:'20 min', cals:280, icon:'ğŸ±', color:'#2a1a1a', benefit:'Energy-rich, easy to digest' }
];

const SESSIONS_DATA = [
  { title:'Understanding Type 2 Diabetes', doc:'Dr. Srinivas Rao', spec:'Diabetologist', lang:'Telugu/English', live:true, time:'3:00 PM Today', viewers:127, icon:'ğŸ©¸' },
  { title:'Heart Health for Rural Communities', doc:'Dr. Rajesh Sharma', spec:'Cardiologist', lang:'Hindi', live:true, time:'5:00 PM Today', viewers:89, icon:'â¤ï¸' },
  { title:'Child Nutrition & Growth', doc:'Dr. Priya Nair', spec:'Pediatrician', lang:'Tamil', live:false, time:'Recorded', viewers:342, icon:'ğŸ‘¶' },
  { title:'Women Reproductive Health', doc:'Dr. Ananya Reddy', spec:'Gynecologist', lang:'Telugu', live:false, time:'Recorded', viewers:215, icon:'ğŸŒ¸' },
  { title:'Yoga for Chronic Pain', doc:'Dr. Venkat Yogi', spec:'Physiotherapist', lang:'Kannada', live:false, time:'Recorded', viewers:178, icon:'ğŸ§˜' },
  { title:'Mental Health Awareness', doc:'Dr. Meera Krishnan', spec:'Psychiatrist', lang:'English', live:true, time:'7:00 PM Today', viewers:54, icon:'ğŸ§ ' }
];

const TIPS_DATA = [
  { icon:'ğŸ’§', title:'Hydration', tip:'Drink 8-10 glasses of water daily. Add lemon/jeera for extra benefits.', category:'Daily' },
  { icon:'ğŸ§´', title:'Hand Hygiene', tip:'Wash hands for 20 seconds before eating. Most infections spread through hands.', category:'Hygiene' },
  { icon:'ğŸŒ', title:'Vitamin D', tip:'10-15 minutes morning sunlight gives natural Vitamin D. Essential for bones.', category:'Nutrition' },
  { icon:'ğŸš¶', title:'Walk Daily', tip:'30 minutes of walking reduces heart disease risk by 35%. Start small.', category:'Exercise' },
  { icon:'ğŸ˜´', title:'Sleep Well', tip:'7-8 hours sleep is mandatory. Sleep deprivation causes 40+ health problems.', category:'Lifestyle' },
  { icon:'ğŸ§˜', title:'Stress Management', tip:'5 minutes of deep breathing (Pranayam) daily reduces stress hormones by 30%.', category:'Mental Health' },
  { icon:'ğŸ¥—', title:'Eat More Vegetables', tip:'5 servings of vegetables daily cuts cancer risk by 20%. Include green leafy veg.', category:'Nutrition' },
  { icon:'ğŸš­', title:'No Tobacco', tip:'Quitting smoking adds 10 years to your life. Free quit helpline: 1800-11-2356', category:'Prevention' },
  { icon:'ğŸ¦·', title:'Dental Health', tip:'Brush twice daily. Poor dental health is linked to heart disease and diabetes.', category:'Hygiene' },
  { icon:'ğŸ’Š', title:'Regular Checkups', tip:'Annual health checkup catches 80% of diseases early. Prevention > cure.', category:'Prevention' },
  { icon:'ğŸ©¸', title:'Blood Sugar Watch', tip:'Check fasting sugar once a month if diabetic family history. Normal: 70-100 mg/dL.', category:'Monitoring' },
  { icon:'ğŸŒ¿', title:'Ayurveda Tips', tip:'Tulsi tea boosts immunity. Triphala aids digestion. Ashwagandha reduces stress.', category:'Natural' }
];

// ===== INIT =====
function init() {
  generateMedIcons();
  buildFeatureGrid();
  animateCounters();
  buildSymptomTags();
  buildCalendar();
  buildTimeSlots();
  buildHospitalList();
  buildRecipes();
  buildSessions();
  buildTips();
  buildPharmacies();
  buildTrends();
  initWeather();
  initChat();
  initReminders();
  initMaternalTips();
  startScreenTimer();
}

// ===== ANIMATED BACKGROUND =====
function generateMedIcons() {
  const icons = ['ğŸ’Š','ğŸ©º','ğŸŒ¡ï¸','ğŸ§¬','âš•ï¸','ğŸ¥','ğŸ’‰','ğŸ©¹','ğŸ”¬','â¤ï¸','ğŸ§ª','ğŸ«','ğŸ§ ','ğŸ¦·','ğŸ‘ï¸','ğŸ©¸'];
  const container = document.getElementById('medIcons');
  for(let i=0; i<30; i++) {
    const div = document.createElement('div');
    div.className = 'med-icon';
    div.textContent = icons[Math.floor(Math.random()*icons.length)];
    div.style.left = Math.random()*100 + 'vw';
    div.style.animationDelay = Math.random()*20 + 's';
    div.style.fontSize = (1.5 + Math.random()*2) + 'rem';
    container.appendChild(div);
  }
}

// ===== PAGE NAVIGATION =====
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  const p = document.getElementById('page-' + id);
  if(p) { p.classList.add('active'); p.scrollIntoView({behavior:'smooth',block:'start'}); }
  document.querySelectorAll('.menu-nav-item').forEach(m => m.classList.remove('active'));
  if(id === 'home') { buildTrends(); }
  if(id === 'weather') initWeather();
  if(id === 'chatbot') { document.getElementById('chatInput').focus(); }
}

// ===== MENU =====
function toggleMenu() {
  const m = document.getElementById('side-menu');
  const o = document.getElementById('menu-overlay');
  m.classList.toggle('open');
  o.classList.toggle('open');
}

// ===== THEME =====
function toggleTheme() {
  STATE.theme = STATE.theme === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', STATE.theme);
  document.querySelector('.theme-toggle').textContent = STATE.theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
}

// ===== LANGUAGE =====
function changeLanguage(lang) {
  STATE.lang = lang;
  const t = T[lang] || T.en;
  const chatInput = document.getElementById('chatInput');
  if(chatInput) chatInput.placeholder = t.chatbot_title;
  const langNames = { en:'English', te:'Telugu (à°¤à±†à°²à±à°—à±)', hi:'Hindi (à¤¹à¤¿à¤‚à¤¦à¥€)', ta:'Tamil (à®¤à®®à®¿à®´à¯)', kn:'Kannada (à²•à²¨à³à²¨à²¡)' };
  const chatLang = document.getElementById('chatLangInfo');
  if(chatLang) chatLang.innerHTML = `ğŸŒ Speaking in: <strong>${langNames[lang] || 'English'}</strong> | ğŸ¤ Voice input available`;
}

// ===== COUNTER ANIMATION =====
function animateCounters() {
  const targets = { cnt1: 124500, cnt2: 38900, cnt3: 2340, cnt4: 187 };
  Object.entries(targets).forEach(([id, target]) => {
    const el = document.getElementById(id);
    if(!el) return;
    let current = 0;
    const step = target / 60;
    const interval = setInterval(() => {
      current = Math.min(current + step, target);
      el.textContent = current >= 1000 ? Math.floor(current/1000) + 'K+' : Math.floor(current);
      if(current >= target) clearInterval(interval);
    }, 30);
  });
}

// ===== FEATURE GRID =====
function buildFeatureGrid() {
  const grid = document.getElementById('featGrid');
  if(!grid) return;
  grid.innerHTML = FEATURES.map(f => `
    <div class="feature-card" onclick="showPage('${f.page}')">
      <span class="feat-icon">${f.icon}</span>
      <div class="feat-title">${f.title}</div>
      <div class="feat-desc">${f.desc}</div>
      <span class="feat-badge">âœ“ ${f.badge}</span>
    </div>
  `).join('');
}

// ===== CHATBOT =====
function initChat() {
  const win = document.getElementById('chatWindow');
  if(!win) return;
  win.innerHTML = '';
  addBotMsg(CARE_RESPONSES.default);
}

function addBotMsg(text) {
  const win = document.getElementById('chatWindow');
  if(!win) return;
  const div = document.createElement('div');
  div.className = 'chat-msg';
  div.innerHTML = `
    <div class="chat-avatar bot-avatar">ğŸ¤–</div>
    <div class="chat-bubble bot-bubble">${text.replace(/\n/g,'<br>').replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')}</div>
  `;
  win.appendChild(div);
  win.scrollTop = win.scrollHeight;
}

function addUserMsg(text) {
  const win = document.getElementById('chatWindow');
  if(!win) return;
  const div = document.createElement('div');
  div.className = 'chat-msg user';
  div.innerHTML = `
    <div class="chat-avatar user-avatar">ğŸ‘¤</div>
    <div class="chat-bubble user-bubble">${text}</div>
  `;
  win.appendChild(div);
  win.scrollTop = win.scrollHeight;
}

function showTyping() {
  const win = document.getElementById('chatWindow');
  if(!win) return;
  const div = document.createElement('div');
  div.id = 'typingIndicator';
  div.className = 'chat-msg';
  div.innerHTML = `
    <div class="chat-avatar bot-avatar">ğŸ¤–</div>
    <div class="typing-indicator">
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
    </div>
  `;
  win.appendChild(div);
  win.scrollTop = win.scrollHeight;
}

function removeTyping() {
  const t = document.getElementById('typingIndicator');
  if(t) t.remove();
}

function getCareBotResponse(text) {
  const lower = text.toLowerCase();
  if(lower.includes('fever') || lower.includes('temperature') || lower.includes('headache')) return CARE_RESPONSES.fever;
  if(lower.includes('stomach') || lower.includes('abdomen') || lower.includes('diarrhea') || lower.includes('vomit')) return CARE_RESPONSES.stomach;
  if(lower.includes('diabetes') || lower.includes('sugar') || lower.includes('blood sugar')) return CARE_RESPONSES.diabetes;
  if(lower.includes('hospital') || lower.includes('doctor') || lower.includes('clinic')) return CARE_RESPONSES.hospital;
  if(lower.includes('baby') || lower.includes('child') || lower.includes('infant') || lower.includes('cough') || lower.includes('cold')) return CARE_RESPONSES.baby;
  if(lower.includes('bp') || lower.includes('blood pressure') || lower.includes('medicine') || lower.includes('tablet')) return CARE_RESPONSES.bp;
  
  // Language-aware generic responses
  const lang = STATE.lang;
  const greetings = { en:'Hello! How can I help with your health today?', te:'à°¨à°®à°¸à±à°•à°¾à°°à°‚! à°®à±€ à°†à°°à±‹à°—à±à°¯à°‚ à°—à±à°°à°¿à°‚à°šà°¿ à°à°®à±ˆà°¨à°¾ à°¸à°¹à°¾à°¯à°‚ à°•à°¾à°µà°¾à°²à°¾?', hi:'à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤†à¤ªà¤•à¥€ à¤¸à¥‡à¤¹à¤¤ à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤•à¥ˆà¤¸à¥‡ à¤®à¤¦à¤¦ à¤•à¤°à¥‚à¤‚?', ta:'à®µà®£à®•à¯à®•à®®à¯! à®‰à®™à¯à®•à®³à¯ à®‰à®Ÿà®²à¯à®¨à®²à®®à¯ à®ªà®±à¯à®±à®¿ à®à®ªà¯à®ªà®Ÿà®¿ à®‰à®¤à®µ à®®à¯à®Ÿà®¿à®¯à¯à®®à¯?', kn:'à²¨à²®à²¸à³à²•à²¾à²°! à²¨à²¿à²®à³à²® à²†à²°à³‹à²—à³à²¯à²¦ à²¬à²—à³à²—à³† à²¹à³‡à²—à³† à²¸à²¹à²¾à²¯ à²®à²¾à²¡à²²à²¿?' };
  return (greetings[lang] || greetings.en) + '\n\nI understand you need help. Could you describe your symptoms in more detail? I can help with:\nâ€¢ Fever, cold, cough\nâ€¢ Stomach issues\nâ€¢ Diabetes, BP management\nâ€¢ Finding hospitals\nâ€¢ Baby care\n\nğŸ“ Emergency: 108 (Free Ambulance)';
}

function sendChat() {
  const input = document.getElementById('chatInput');
  const msg = input.value.trim();
  if(!msg) return;
  addUserMsg(msg);
  input.value = '';
  showTyping();
  setTimeout(() => {
    removeTyping();
    const response = getCareBotResponse(msg);
    addBotMsg(response);
    if(STATE.synth) speakResponse(response.replace(/<[^>]*>/g,'').substring(0, 200));
  }, 1200 + Math.random()*800);
}

function sendQuick(msg) {
  document.getElementById('chatInput').value = msg;
  sendChat();
}

function speakResponse(text) {
  if(!STATE.synth || STATE.synth.speaking) return;
  const utter = new SpeechSynthesisUtterance(text);
  const langMap = { en:'en-IN', te:'te-IN', hi:'hi-IN', ta:'ta-IN', kn:'kn-IN' };
  utter.lang = langMap[STATE.lang] || 'en-IN';
  utter.rate = 0.9;
  STATE.synth.speak(utter);
}

// ===== VOICE INPUT =====
function toggleVoice() {
  if(!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
    alert('Voice recognition not supported in this browser. Please use Chrome.');
    return;
  }
  if(STATE.isListening) {
    if(STATE.recognition) STATE.recognition.stop();
    document.getElementById('voiceBtn').textContent = 'ğŸ¤';
    STATE.isListening = false;
    return;
  }
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  STATE.recognition = new SpeechRecognition();
  const langMap = { en:'en-IN', te:'te-IN', hi:'hi-IN', ta:'ta-IN', kn:'kn-IN' };
  STATE.recognition.lang = langMap[STATE.lang] || 'en-IN';
  STATE.recognition.continuous = false;
  STATE.recognition.interimResults = false;
  STATE.recognition.onresult = (e) => {
    const transcript = e.results[0][0].transcript;
    document.getElementById('chatInput').value = transcript;
    STATE.isListening = false;
    document.getElementById('voiceBtn').textContent = 'ğŸ¤';
    sendChat();
  };
  STATE.recognition.onerror = () => {
    STATE.isListening = false;
    document.getElementById('voiceBtn').textContent = 'ğŸ¤';
  };
  STATE.recognition.start();
  STATE.isListening = true;
  document.getElementById('voiceBtn').textContent = 'ğŸ”´';
}

// ===== SYMPTOM TRIAGE =====
function buildSymptomTags() {
  const container = document.getElementById('symptomTags');
  if(!container) return;
  container.innerHTML = SYMPTOMS.map(s => `
    <div class="symptom-tag" onclick="toggleSymptom(this)">${s}</div>
  `).join('');
}

function toggleSymptom(el) {
  el.classList.toggle('selected');
}

function runTriage() {
  const age = parseInt(document.getElementById('triageAge').value) || 0;
  const duration = parseInt(document.getElementById('triageDuration').value) || 1;
  const selected = [...document.querySelectorAll('.symptom-tag.selected')].map(e => e.textContent);
  const desc = document.getElementById('triageDesc').value;

  if(selected.length === 0 && !desc) {
    alert('Please select at least one symptom or describe your condition.');
    return;
  }

  // AI Risk Scoring Algorithm (Weighted)
  let score = 0;
  const emergencySymptoms = ['Chest Pain','Breathing Difficulty','Irregular Heartbeat'];
  const highSymptoms = ['Fever','Dizziness','Nausea','Vomiting'];
  const moderateSymptoms = ['Headache','Cough','Stomach Pain','Back Pain'];

  selected.forEach(s => {
    if(emergencySymptoms.includes(s)) score += 40;
    else if(highSymptoms.includes(s)) score += 20;
    else if(moderateSymptoms.includes(s)) score += 10;
    else score += 5;
  });

  // Duration factor
  score += duration * 8;
  // Age factor
  if(age > 60) score += 20;
  else if(age < 5) score += 15;
  // Description keywords
  if(desc.toLowerCase().includes('severe') || desc.toLowerCase().includes('severe')) score += 20;
  if(desc.toLowerCase().includes('blood')) score += 30;
  if(desc.toLowerCase().includes('cannot breathe')) score += 50;

  score = Math.min(score, 100);

  const result = document.getElementById('triageResult');
  const label = document.getElementById('riskLabel');
  const fill = document.getElementById('riskFill');
  const action = document.getElementById('riskAction');
  const spec = document.getElementById('riskSpec');
  const tips = document.getElementById('riskTips');

  result.classList.add('show');

  if(score >= 70) {
    label.textContent = 'ğŸš¨ HIGH RISK';
    label.className = 'risk-label risk-high';
    fill.style.background = 'linear-gradient(90deg,#dc2626,#ef4444)';
    action.innerHTML = 'âš ï¸ <strong>Seek medical attention IMMEDIATELY.</strong> This could be a serious condition. Call 108 (Free Emergency Ambulance) or visit the nearest Emergency Department now.';
    spec.innerHTML = 'ğŸ¥ <strong>Emergency Medicine</strong> or nearest Government Hospital ER';
    tips.innerHTML = 'â€¢ Stay calm and sit down<br>â€¢ Do not eat or drink anything<br>â€¢ Call 108 immediately<br>â€¢ Do not drive yourself â€” call for help';
  } else if(score >= 40) {
    label.textContent = 'âš ï¸ MODERATE RISK';
    label.className = 'risk-label risk-medium';
    fill.style.background = 'linear-gradient(90deg,#f59e0b,#fbbf24)';
    action.innerHTML = 'ğŸ¥ <strong>Visit a doctor within 24 hours.</strong> Your symptoms need medical evaluation. Book an appointment or visit a nearby clinic.';
    spec.innerHTML = 'ğŸ‘¨â€âš•ï¸ ' + getSpecialist(selected);
    tips.innerHTML = 'â€¢ Rest and stay hydrated<br>â€¢ Monitor temperature regularly<br>â€¢ Note any worsening symptoms<br>â€¢ Book appointment at earliest';
  } else {
    label.textContent = 'âœ… LOW RISK';
    label.className = 'risk-label risk-low';
    fill.style.background = 'linear-gradient(90deg,#00c853,#69f0ae)';
    action.innerHTML = 'ğŸ  <strong>Home care recommended.</strong> Your symptoms appear mild. Monitor your condition and follow self-care tips. Consult doctor if no improvement in 2-3 days.';
    spec.innerHTML = 'ğŸ‘¨â€âš•ï¸ General Physician (if not improving)';
    tips.innerHTML = 'â€¢ Rest and drink plenty of fluids<br>â€¢ Eat light, easy-to-digest food<br>â€¢ Take OTC medications if needed<br>â€¢ Seek help if symptoms worsen';
  }

  fill.style.width = score + '%';
}

function getSpecialist(symptoms) {
  const s = symptoms.join(' ').toLowerCase();
  if(s.includes('chest') || s.includes('heart')) return 'Cardiologist';
  if(s.includes('stomach') || s.includes('nausea') || s.includes('diarrhea')) return 'Gastroenterologist or General Physician';
  if(s.includes('headache') || s.includes('dizziness')) return 'Neurologist or General Physician';
  if(s.includes('cough') || s.includes('breathing')) return 'Pulmonologist or General Physician';
  if(s.includes('rash') || s.includes('skin')) return 'Dermatologist';
  if(s.includes('eye')) return 'Ophthalmologist';
  return 'General Physician';
}

// ===== APPOINTMENT / CALENDAR =====
function buildCalendar() {
  const now = STATE.calDate;
  const year = now.getFullYear();
  const month = now.getMonth();
  const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  const titleEl = document.getElementById('calTitle');
  if(titleEl) titleEl.textContent = months[month] + ' ' + year;

  const grid = document.getElementById('calGrid');
  if(!grid) return;
  grid.innerHTML = '';

  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1, 0).getDate();
  const today = new Date();

  for(let i=0; i<firstDay; i++) {
    const d = document.createElement('div');
    d.className = 'cal-day empty';
    grid.appendChild(d);
  }

  for(let d=1; d<=daysInMonth; d++) {
    const div = document.createElement('div');
    div.className = 'cal-day';
    if(d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) div.classList.add('today');
    div.textContent = d;
    const thisDate = new Date(year, month, d);
    if(thisDate < today && !(d === today.getDate() && month === today.getMonth())) {
      div.style.opacity = '0.3'; div.style.cursor = 'default';
    } else {
      div.onclick = () => selectDate(div, year, month, d);
    }
    grid.appendChild(div);
  }
}

function selectDate(el, year, month, day) {
  document.querySelectorAll('.cal-day').forEach(d => d.classList.remove('selected'));
  el.classList.add('selected');
  STATE.selectedDate = new Date(year, month, day);
  buildTimeSlots();
}

function buildTimeSlots() {
  const container = document.getElementById('timeSlots');
  if(!container) return;
  const slots = ['9:00 AM','9:30 AM','10:00 AM','10:30 AM','11:00 AM','11:30 AM','12:00 PM','2:00 PM','2:30 PM','3:00 PM','3:30 PM','4:00 PM','4:30 PM','5:00 PM'];
  const bookedRandom = [2,5,8];
  container.innerHTML = slots.map((s,i) => `
    <div class="time-slot ${bookedRandom.includes(i) ? 'booked' : ''}" onclick="${bookedRandom.includes(i)?'':'selectTime(this,\''+s+'\')'}">
      ${s}${bookedRandom.includes(i)?' (Booked)':''}
    </div>
  `).join('');
}

function selectTime(el, time) {
  document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
  el.classList.add('selected');
  STATE.selectedTime = time;
}

function prevMonth() { STATE.calDate.setMonth(STATE.calDate.getMonth()-1); buildCalendar(); }
function nextMonth() { STATE.calDate.setMonth(STATE.calDate.getMonth()+1); buildCalendar(); }

function loadDoctors() {
  const spec = document.getElementById('apptSpec').value;
  const container = document.getElementById('doctorCards');
  if(!container) return;
  const docs = DOCTORS[spec] || [];
  if(!docs.length) { container.innerHTML = '<div class="text-small" style="color:var(--text-secondary);padding:20px;text-align:center">Select a specialty to see available doctors</div>'; return; }
  container.innerHTML = docs.map((d,i) => `
    <div class="doctor-card" onclick="selectDoctor(this,${i},'${spec}')">
      <div class="doctor-avatar">${d.icon}</div>
      <div class="doctor-name">${d.name}</div>
      <div class="doctor-spec">${d.spec}</div>
      <div class="doctor-rating">${d.rating} Â· ${d.exp} exp</div>
    </div>
  `).join('');
}

function selectDoctor(el, i, spec) {
  document.querySelectorAll('.doctor-card').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  STATE.selectedDoctor = (DOCTORS[spec] || [])[i];
}

function bookAppointment() {
  const name = document.getElementById('patientName').value;
  const phone = document.getElementById('patientPhone').value;
  const spec = document.getElementById('apptSpec').value;
  if(!name || !phone || !spec || !STATE.selectedDate || !STATE.selectedTime) {
    alert('Please fill all fields, select a date, time, and specialty.');
    return;
  }
  const appt = {
    name, phone, spec, date: STATE.selectedDate.toDateString(),
    time: STATE.selectedTime, doctor: STATE.selectedDoctor?.name || 'TBD',
    id: Date.now()
  };
  STATE.appointments.push(appt);
  renderBookings();
  document.getElementById('apptSuccess').classList.add('show');
  setTimeout(() => document.getElementById('apptSuccess').classList.remove('show'), 4000);
}

function renderBookings() {
  const el = document.getElementById('myBookings');
  if(!el) return;
  if(!STATE.appointments.length) { el.innerHTML = '<div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">No appointments yet</div>'; return; }
  el.innerHTML = STATE.appointments.map(a => `
    <div class="reminder-item appt" style="flex-direction:column;align-items:flex-start;gap:6px">
      <div style="font-weight:700">ğŸ“… ${a.spec}</div>
      <div class="text-small">ğŸ‘¨â€âš•ï¸ ${a.doctor}</div>
      <div class="text-small">ğŸ“† ${a.date} at ${a.time}</div>
      <div class="text-small">ğŸ‘¤ ${a.name} Â· ğŸ“ ${a.phone}</div>
    </div>
  `).join('');
}

// ===== PRESCRIPTION / OCR =====
function handleDragOver(e) { e.preventDefault(); document.getElementById('uploadZone').classList.add('dragover'); }
function handleDrop(e) { e.preventDefault(); document.getElementById('uploadZone').classList.remove('dragover'); handleFiles(e.dataTransfer.files); }
function handleFileUpload(e) { handleFiles(e.target.files); }

function handleFiles(files) {
  if(!files.length) return;
  const file = files[0];
  document.getElementById('uploadPreview').style.display = 'block';
  document.getElementById('fileName').textContent = file.name;
  document.getElementById('fileSize').textContent = (file.size/1024).toFixed(1) + ' KB';
  
  let progress = 0;
  const interval = setInterval(() => {
    progress += Math.random() * 15;
    if(progress >= 100) { progress = 100; clearInterval(interval); showOCRResult(file.name); }
    document.getElementById('ocrProgress').style.width = progress + '%';
  }, 200);
}

function showOCRResult(fileName) {
  document.getElementById('ocrResult').style.display = 'block';
  const sampleOCR = `PRESCRIPTION
Patient: [Patient Name]
Date: ${new Date().toLocaleDateString()}
Doctor: Dr. Ramesh Kumar, MBBS, MD

Rx:
1. Tab. Metformin 500mg - Twice daily after meals Ã— 30 days
2. Tab. Amlodipine 5mg - Once daily morning Ã— 30 days  
3. Tab. Rosuvastatin 10mg - Once daily night Ã— 30 days

Advice: Low salt diet, regular exercise, avoid fried foods
Review: After 1 month with HbA1c report

[Doctor's Signature & Stamp]`;
  document.getElementById('ocrText').textContent = sampleOCR;
  showAIExplanation(sampleOCR, fileName);
  STATE.documents.push({ name: fileName, date: new Date().toLocaleDateString(), summary: 'Prescription â€” 3 medicines extracted' });
  renderDocList();
}

function showAIExplanation(text, fileName) {
  const el = document.getElementById('prescExplanation');
  el.innerHTML = `
    <div class="section-title" style="font-size:1rem;margin-bottom:12px">ğŸ¤– AI Explanation</div>
    <div class="disclaimer">âš•ï¸ This is an AI-generated explanation for information only. Consult your doctor for medical advice.</div>
    <div style="margin-top:16px">
      <div class="text-small mb-8" style="color:var(--brand-sky)">ğŸ“‹ What's in this prescription?</div>
      <div style="line-height:1.8;font-size:0.88rem">
        <strong>3 medicines were prescribed:</strong><br><br>
        ğŸ’Š <strong>Metformin 500mg</strong> â€” This is a diabetes medicine. Helps control blood sugar. Take after eating.<br><br>
        ğŸ’Š <strong>Amlodipine 5mg</strong> â€” This controls blood pressure (BP). Take in the morning.<br><br>
        ğŸ’Š <strong>Rosuvastatin 10mg</strong> â€” This lowers cholesterol. Take at night.<br><br>
        ğŸ“Œ <strong>Doctor says:</strong> Eat less salt, walk daily, avoid oily food. Come back after 1 month with sugar test report.
      </div>
    </div>
    <div style="margin-top:16px">
      <div class="text-small mb-8" style="color:var(--brand-orange)">âš ï¸ Important</div>
      <div class="text-small" style="line-height:1.6">â€¢ Do NOT stop these medicines without telling your doctor<br>â€¢ Take medicines at the same time daily<br>â€¢ If you feel unwell after any medicine, call your doctor</div>
    </div>
    <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
      <button class="btn-secondary" onclick="speakResponse('Metformin controls sugar. Amlodipine controls blood pressure. Rosuvastatin controls cholesterol. Take as prescribed.')">ğŸ”Š Listen</button>
      <button class="btn-outline" onclick="showPage('reminders')">â° Set Medicine Reminders</button>
    </div>
  `;
}

function loadSampleReport() {
  showOCRResult('Sample_Lab_Report.pdf');
}

function openCamera() {
  alert('Camera feature: Please allow camera permission in your browser settings. This would open your device camera to capture prescriptions directly.');
}

function renderDocList() {
  const el = document.getElementById('docList');
  if(!el) return;
  el.innerHTML = STATE.documents.map(d => `
    <div class="reminder-item">
      <div>
        <div style="font-weight:600">ğŸ“„ ${d.name}</div>
        <div class="text-small">${d.summary} Â· ${d.date}</div>
      </div>
    </div>
  `).join('');
}

// ===== BMI CALCULATOR =====
function updateBMI() {
  const h = parseFloat(document.getElementById('bmiHeight').value) / 100;
  const w = parseFloat(document.getElementById('bmiWeight').value);
  const age = parseInt(document.getElementById('bmiAge').value) || 25;
  const activity = document.getElementById('bmiActivity').value;
  const goal = document.getElementById('bmiGoal').value;

  if(!h || !w || h < 0.5 || w < 1) return;

  const bmi = (w / (h * h)).toFixed(1);
  document.getElementById('bmiVal').textContent = bmi;

  let cat, color;
  if(bmi < 18.5) { cat = 'Underweight'; color = '#60a5fa'; }
  else if(bmi < 25) { cat = 'Normal âœ…'; color = '#00c853'; }
  else if(bmi < 30) { cat = 'Overweight'; color = '#fbbf24'; }
  else { cat = 'Obese'; color = '#ef4444'; }
  
  document.getElementById('bmiCat').textContent = cat;
  document.getElementById('bmiVal').style.color = color;

  // BMR calculation (Mifflin-St Jeor)
  const isMale = true;
  const bmr = isMale ? 10*w + 6.25*(h*100) - 5*age + 5 : 10*w + 6.25*(h*100) - 5*age - 161;
  const actFactors = { sedentary:1.2, light:1.375, moderate:1.55, active:1.725, very_active:1.9 };
  let tdee = Math.round(bmr * (actFactors[activity] || 1.55));
  let targetCal = goal === 'lose' ? tdee - 500 : goal === 'gain' ? tdee + 300 : tdee;

  document.getElementById('bmiInfo').innerHTML = `
    <div class="badge badge-blue" style="margin-right:8px">BMR: ${Math.round(bmr)} kcal/day</div>
    <div class="badge badge-green" style="margin-right:8px">TDEE: ${tdee} kcal/day</div>
    <div class="badge badge-orange">Target: ${targetCal} kcal/day</div>
  `;

  document.getElementById('dietPlan').innerHTML = `
    <div class="text-small mb-8">ğŸ¥— Diet Plan (${goal === 'lose' ? 'Weight Loss' : goal === 'gain' ? 'Weight Gain' : 'Maintenance'})</div>
    <div class="text-small" style="line-height:1.8;color:var(--text-secondary)">
      â€¢ Breakfast: Oats/Idli with sambar (${Math.round(targetCal*0.25)} kcal)<br>
      â€¢ Lunch: Brown rice + dal + sabzi (${Math.round(targetCal*0.35)} kcal)<br>
      â€¢ Snack: Fruit + nuts (${Math.round(targetCal*0.1)} kcal)<br>
      â€¢ Dinner: Roti + sabzi + curd (${Math.round(targetCal*0.3)} kcal)<br>
      â€¢ Water: ${Math.max(2, Math.round(w*0.033))} litres/day
    </div>
  `;

  document.getElementById('exercisePlan').innerHTML = `
    <div class="text-small mb-8">ğŸƒ Exercise Plan</div>
    <div class="text-small" style="line-height:1.8;color:var(--text-secondary)">
      ${goal === 'lose' ? 
        'â€¢ 45-min brisk walk daily<br>â€¢ 20-min yoga + stretching<br>â€¢ Avoid elevator, take stairs<br>â€¢ Weekend: Light jogging or cycling' :
        goal === 'gain' ?
        'â€¢ Strength exercises: Push-ups, squats<br>â€¢ 30-min moderate exercise<br>â€¢ Rest 1-2 days/week for muscle recovery' :
        'â€¢ 30-min daily walk<br>â€¢ Yoga 3x/week<br>â€¢ Stretching every morning<br>â€¢ Stay active throughout day'
      }
    </div>
  `;
}

// ===== HEALTH CHECKS =====
function simulateHR() {
  let hr = 60;
  let count = 0;
  const interval = setInterval(() => {
    hr = 65 + Math.floor(Math.random()*20);
    document.getElementById('hrVal').textContent = hr;
    const status = document.getElementById('hrStatus');
    if(hr < 60) { status.textContent = 'Bradycardia'; status.style.color = '#60a5fa'; }
    else if(hr > 100) { status.textContent = 'Tachycardia'; status.style.color = '#ef4444'; }
    else { status.textContent = 'Normal âœ…'; status.style.color = '#00c853'; }
    if(++count >= 8) clearInterval(interval);
  }, 300);
}

function simulateSPO2() {
  const val = 95 + Math.floor(Math.random()*5);
  document.getElementById('spo2Val').textContent = val + '%';
}

function checkBP() {
  const sys = parseInt(document.getElementById('bpSys').value);
  const dia = parseInt(document.getElementById('bpDia').value);
  if(!sys || !dia) return;
  document.getElementById('bpVal').textContent = sys + '/' + dia;
  const status = document.getElementById('bpStatus');
  if(sys < 90 || dia < 60) { status.textContent = 'Low BP âš ï¸'; status.style.color = '#60a5fa'; }
  else if(sys < 120 && dia < 80) { status.textContent = 'Normal âœ…'; status.style.color = '#00c853'; }
  else if(sys < 130 && dia < 80) { status.textContent = 'Elevated'; status.style.color = '#fbbf24'; }
  else if(sys < 140 || dia < 90) { status.textContent = 'High BP Stage 1'; status.style.color = '#f97316'; }
  else { status.textContent = 'High BP Stage 2 ğŸš¨'; status.style.color = '#ef4444'; }
}

function checkBS() {
  const val = parseInt(document.getElementById('bsInput').value);
  const type = document.getElementById('bsType').value;
  if(!val) return;
  document.getElementById('bsVal').textContent = val;
  const status = document.getElementById('bsStatus');
  let label, color;
  if(type === 'fasting') {
    if(val < 70) { label = 'Hypoglycemia âš ï¸'; color = '#60a5fa'; }
    else if(val < 100) { label = 'Normal âœ…'; color = '#00c853'; }
    else if(val < 126) { label = 'Pre-diabetic'; color = '#fbbf24'; }
    else { label = 'Diabetic Range ğŸš¨'; color = '#ef4444'; }
  } else if(type === 'pp') {
    if(val < 140) { label = 'Normal âœ…'; color = '#00c853'; }
    else if(val < 200) { label = 'Pre-diabetic'; color = '#fbbf24'; }
    else { label = 'Diabetic Range ğŸš¨'; color = '#ef4444'; }
  } else {
    if(val < 200) { label = 'Normal âœ…'; color = '#00c853'; }
    else { label = 'High â€” Consult Doctor'; color = '#ef4444'; }
  }
  status.textContent = label; status.style.color = color;
}

function checkTemp() {
  const val = parseFloat(document.getElementById('tempInput').value);
  const unit = document.getElementById('tempUnit').value;
  if(!val) return;
  const tempF = unit === 'C' ? (val * 9/5) + 32 : val;
  document.getElementById('tempVal').textContent = tempF.toFixed(1);
  document.getElementById('tempUnit').title = 'Â°' + unit;
  const status = document.getElementById('tempStatus');
  if(tempF < 96) { status.textContent = 'Hypothermia â€” Seek help'; status.style.color = '#60a5fa'; }
  else if(tempF < 99) { status.textContent = 'Normal âœ…'; status.style.color = '#00c853'; }
  else if(tempF < 100.4) { status.textContent = 'Low-grade fever'; status.style.color = '#fbbf24'; }
  else if(tempF < 103) { status.textContent = 'Fever â€” Take medication'; status.style.color = '#f97316'; }
  else { status.textContent = 'High Fever ğŸš¨ â€” See doctor'; status.style.color = '#ef4444'; }
}

let stepInterval = null;
function startStepCounter() {
  if(stepInterval) { clearInterval(stepInterval); stepInterval = null; return; }
  stepInterval = setInterval(() => {
    STATE.stepCount += Math.floor(Math.random()*3+1);
    document.getElementById('stepsVal').textContent = STATE.stepCount.toLocaleString();
    const pct = Math.min(STATE.stepCount/10000*100, 100);
    document.getElementById('stepsFill').style.width = pct + '%';
    document.getElementById('stepsStatus').textContent = `Goal: 10,000 steps | ${(10000-STATE.stepCount) > 0 ? (10000-STATE.stepCount).toLocaleString() + ' more to go!' : 'ğŸ‰ Goal achieved!'}`;
  }, 500);
}

// ===== REMINDERS =====
function initReminders() {
  // Default reminder
  STATE.reminders.push({ type:'med', name:'Metformin 500mg', time:'08:00', freq:'Daily', on:true });
  renderReminders();
}

function addReminder() {
  const type = document.getElementById('remType').value;
  const name = document.getElementById('remName').value;
  const time = document.getElementById('remTime').value;
  const freq = document.getElementById('remFreq').value;
  if(!name || !time) { alert('Please enter name and time.'); return; }
  STATE.reminders.push({ type, name, time, freq, on:true });
  renderReminders();
  document.getElementById('remName').value = '';
  document.getElementById('remTime').value = '';
  scheduleNotification(name, time);
}

function renderReminders() {
  const el = document.getElementById('reminderList');
  if(!el) return;
  if(!STATE.reminders.length) { el.innerHTML = '<div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">No reminders set</div>'; return; }
  el.innerHTML = STATE.reminders.map((r,i) => `
    <div class="reminder-item ${r.type}">
      <div>
        <div style="font-weight:700">${r.type==='med'?'ğŸ’Š':'ğŸ“…'} ${r.name}</div>
        <div class="text-small">â° ${r.time} Â· ${r.freq}</div>
      </div>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="toggle-switch ${r.on?'on':''}" onclick="toggleReminder(${i})">
          <div class="toggle-knob"></div>
        </div>
        <button onclick="deleteReminder(${i})" style="background:rgba(220,38,38,0.2);border:1px solid rgba(220,38,38,0.4);color:#ef4444;width:28px;height:28px;border-radius:6px;cursor:pointer">âœ•</button>
      </div>
    </div>
  `).join('');
}

function toggleReminder(i) { STATE.reminders[i].on = !STATE.reminders[i].on; renderReminders(); }
function deleteReminder(i) { STATE.reminders.splice(i,1); renderReminders(); }

function scheduleNotification(name, time) {
  if('Notification' in window) {
    Notification.requestPermission().then(perm => {
      if(perm === 'granted') {
        // Simulate notification
        setTimeout(() => new Notification('ğŸ’Š Medicine Reminder', { body: `Time to take ${name}`, icon: '' }), 3000);
      }
    });
  }
}

// ===== MEDICINE DELIVERY =====
function buildPharmacies() {
  const el = document.getElementById('pharmacyList');
  if(!el) return;
  el.innerHTML = PHARMACIES.map(p => `
    <div class="hospital-item">
      <div class="hosp-icon">ğŸ’Š</div>
      <div style="flex:1">
        <div class="hosp-name">${p.name}</div>
        <div class="hosp-dist">ğŸ“ ${p.dist} away Â· â±ï¸ ${p.time} delivery</div>
        <div class="hosp-open ${p.open?'open':'closed'}">${p.open ? 'ğŸŸ¢ Open Now' : 'ğŸ”´ Closed'}</div>
      </div>
    </div>
  `).join('');
}

function searchMedicines() {
  const q = document.getElementById('medSearch').value.toLowerCase();
  const el = document.getElementById('medResults');
  if(!el) return;
  if(!q) { el.innerHTML = ''; return; }
  const results = MEDICINES.filter(m => m.name.toLowerCase().includes(q));
  el.innerHTML = results.map((m,i) => `
    <div class="hospital-item" onclick="addToCart(${i})">
      <div class="hosp-icon">ğŸ’Š</div>
      <div style="flex:1">
        <div class="hosp-name">${m.name}</div>
        <div class="text-small">${m.desc}</div>
        <div style="color:var(--brand-green);font-weight:700">â‚¹${m.price}</div>
      </div>
      ${m.stock ? '<button class="btn-secondary" style="padding:6px 12px;font-size:0.8rem">+ Cart</button>' : '<span class="badge badge-orange">Out of Stock</span>'}
    </div>
  `).join('');
}

function addToCart(index) {
  const med = MEDICINES[index];
  if(!med.stock) { alert('Sorry, this medicine is out of stock.'); return; }
  const existing = STATE.cart.find(c => c.name === med.name);
  if(existing) existing.qty++;
  else STATE.cart.push({ ...med, qty:1 });
  renderCart();
}

function renderCart() {
  const el = document.getElementById('cartItems');
  const totalEl = document.getElementById('cartTotal');
  const totalAmt = document.getElementById('totalAmt');
  if(!el) return;
  if(!STATE.cart.length) {
    el.innerHTML = '<div class="text-small" style="text-align:center;padding:20px;color:var(--text-secondary)">Cart is empty</div>';
    if(totalEl) totalEl.style.display = 'none';
    return;
  }
  let total = 0;
  el.innerHTML = STATE.cart.map((item,i) => {
    total += item.price * item.qty;
    return `
      <div style="display:flex;justify-content:space-between;align-items:center;padding:8px;border-bottom:1px solid var(--border)">
        <div>
          <div style="font-size:0.85rem;font-weight:600">${item.name}</div>
          <div class="text-small">â‚¹${item.price} Ã— ${item.qty}</div>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <div style="font-weight:700;color:var(--brand-green)">â‚¹${item.price * item.qty}</div>
          <button onclick="removeFromCart(${i})" style="background:rgba(220,38,38,0.2);border:none;color:#ef4444;width:24px;height:24px;border-radius:4px;cursor:pointer">âœ•</button>
        </div>
      </div>
    `;
  }).join('');
  if(totalEl) { totalEl.style.display = 'block'; totalAmt.textContent = 'â‚¹' + total; }
}

function removeFromCart(i) { STATE.cart.splice(i,1); renderCart(); }

function placeOrder() {
  document.getElementById('orderTracking').style.display = 'block';
  STATE.cart = [];
  renderCart();
  document.getElementById('medSearch').value = '';
  document.getElementById('medResults').innerHTML = '';
  
  const steps = ['t2','t3','t4'];
  const labels = ['Preparing','On the Way','Delivered'];
  let i = 0;
  let eta = 10;
  const etaEl = document.getElementById('etaDisplay');
  etaEl.textContent = `â±ï¸ ETA: ${eta} minutes`;
  const interval = setInterval(() => {
    if(i < steps.length) {
      document.getElementById(steps[i]).classList.add('active');
      i++;
      eta -= 3;
      etaEl.textContent = eta > 0 ? `â±ï¸ ETA: ${eta} minutes` : 'âœ… Delivered!';
    } else { clearInterval(interval); }
  }, 2500);
}

// ===== MAPS =====
function buildHospitalList() {
  filterHospitals();
}

function filterHospitals() {
  const q = (document.getElementById('mapSearch')?.value || '').toLowerCase();
  const type = document.getElementById('hospType')?.value || '';
  const el = document.getElementById('hospitalList');
  if(!el) return;
  const filtered = HOSPITALS.filter(h => 
    (h.name.toLowerCase().includes(q) || q === '') &&
    (h.type === type || type === '')
  );
  el.innerHTML = filtered.map(h => `
    <div class="hospital-item" onclick="openDirections('${h.name}')">
      <div class="hosp-icon">${h.icon}</div>
      <div style="flex:1">
        <div class="hosp-name">${h.name}</div>
        <div class="hosp-dist">ğŸ“ ${h.dist} Â· ${h.spec.join(', ')}</div>
        <div class="hosp-open ${h.open?'open':'closed'}">${h.open?'ğŸŸ¢ Open Now':'ğŸ”´ Closed'}</div>
      </div>
      <div style="text-align:right">
        <div class="text-small" style="color:var(--brand-sky)">ğŸ“ ${h.phone}</div>
        <button class="btn-secondary" style="padding:6px 12px;font-size:0.75rem;margin-top:6px">ğŸ§­ Navigate</button>
      </div>
    </div>
  `).join('');
}

function useMyLocation() {
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      alert(`ğŸ“ Your location: ${pos.coords.latitude.toFixed(4)}, ${pos.coords.longitude.toFixed(4)}\n\nShowing hospitals near you. Connect Google Maps API for live navigation.`);
    }, () => alert('Location access denied. Please allow location permission.'));
  }
}

function openDirections(name) {
  window.open(`https://www.google.com/maps/search/${encodeURIComponent(name)}`, '_blank');
}

function openMapLink() {
  window.open('https://www.google.com/maps/search/hospitals+near+me', '_blank');
}

// ===== RECIPES =====
function buildRecipes() { filterRecipes(); }
function filterRecipes() {
  const q = (document.getElementById('recipeSearch')?.value || '').toLowerCase();
  const cat = document.getElementById('recipeFilter')?.value || '';
  const el = document.getElementById('recipeGrid');
  if(!el) return;
  const filtered = RECIPES.filter(r => 
    (r.name.toLowerCase().includes(q) || q === '') &&
    (r.cat === cat || cat === '')
  );
  const colors = { diabetes:'#1a3a1a', bp:'#3a1a2a', anemia:'#1a2a1a', heart:'#2a2a1a', weight:'#2a1a3a', pregnancy:'#1a2a3a' };
  el.innerHTML = filtered.map(r => `
    <div class="recipe-card" onclick="showRecipeDetail('${r.name}')">
      <div class="recipe-img" style="background:linear-gradient(135deg,${r.color || '#1a2a3a'},rgba(5,13,26,0.8))">
        <div style="font-size:4rem">${r.icon}</div>
        <div class="recipe-img-overlay"></div>
      </div>
      <div class="recipe-body">
        <div class="recipe-title">${r.name}</div>
        <div class="recipe-meta">
          <span>â±ï¸ ${r.time}</span>
          <span>ğŸ”¥ ${r.cals} kcal</span>
        </div>
        <div class="text-small" style="margin-top:6px;color:var(--brand-sky)">${r.benefit}</div>
        <span class="recipe-tag">${r.cat}</span>
      </div>
    </div>
  `).join('');
}

function showRecipeDetail(name) {
  const r = RECIPES.find(x => x.name === name);
  if(!r) return;
  alert(`ğŸ½ï¸ ${r.name}\n\nâ±ï¸ Time: ${r.time} | ğŸ”¥ Calories: ${r.cals}\n\nâœ¨ ${r.benefit}\n\nIngredients and full recipe would be shown in a detailed modal view.`);
}

// ===== SESSIONS =====
function buildSessions() {
  const el = document.getElementById('sessionCards');
  if(!el) return;
  el.innerHTML = SESSIONS_DATA.map(s => `
    <div class="session-card" onclick="joinSession('${s.title}')">
      <div class="session-thumb">
        <div>${s.icon}</div>
        ${s.live ? `<div class="live-badge">â— LIVE</div>` : '<div style="position:absolute;top:12px;right:12px;background:rgba(0,100,180,0.6);padding:3px 10px;border-radius:20px;font-size:0.7rem">ğŸ“¹ Recorded</div>'}
      </div>
      <div class="session-info">
        <div class="session-title">${s.title}</div>
        <div class="session-meta">ğŸ‘¨â€âš•ï¸ ${s.doc} Â· ${s.spec}</div>
        <div class="session-meta">ğŸŒ ${s.lang} Â· ${s.time}</div>
        <div class="session-meta">ğŸ‘¥ ${s.viewers} ${s.live?'watching':'views'}</div>
      </div>
    </div>
  `).join('');
}

function joinSession(title) {
  alert(`ğŸ¥ Joining: "${title}"\n\nIn production: This would open a video streaming interface using WebRTC or embedded video player.\n\nFor live sessions, you'd need to register first.`);
}

function registerSession() {
  const name = document.getElementById('sessName').value;
  const phone = document.getElementById('sessPhone').value;
  if(!name || !phone) { alert('Please enter name and phone.'); return; }
  document.getElementById('sessSuccess').classList.add('show');
  setTimeout(() => document.getElementById('sessSuccess').classList.remove('show'), 3000);
}

// ===== EYE HEALTH =====
let screenTimerInterval;
function startScreenTimer() {
  STATE.screenStartTime = Date.now();
  clearInterval(screenTimerInterval);
  screenTimerInterval = setInterval(() => {
    const elapsed = Math.floor((Date.now() - STATE.screenStartTime) / 1000);
    const h = Math.floor(elapsed/3600);
    const m = Math.floor((elapsed%3600)/60);
    const s = elapsed % 60;
    const el = document.getElementById('screenTimer');
    if(el) el.textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    const warn = document.getElementById('screenWarning');
    if(warn && elapsed > 1200) warn.style.display = 'flex';
  }, 1000);
}

function startEyeBreak() {
  const el = document.getElementById('eyeBreakTimer');
  if(!el) return;
  el.style.display = 'block';
  let count = 20;
  document.getElementById('breakCountdown').textContent = count;
  const interval = setInterval(() => {
    count--;
    document.getElementById('breakCountdown').textContent = count;
    if(count <= 0) { clearInterval(interval); el.style.display = 'none'; alert('âœ… Eye break complete! Your eyes thank you.'); }
  }, 1000);
}

function resetScreenTime() {
  STATE.screenStartTime = Date.now();
  const warn = document.getElementById('screenWarning');
  if(warn) warn.style.display = 'none';
}

function checkVision() {
  const row = parseInt(document.getElementById('visionRow').value);
  const el = document.getElementById('visionResult');
  if(!el || !row) return;
  const results = {
    1: { vision:'6/60 or worse', label:'Very Poor', advice:'Visit ophthalmologist urgently.' },
    2: { vision:'6/36', label:'Poor', advice:'Need glasses. Visit eye doctor soon.' },
    3: { vision:'6/24', label:'Below Normal', advice:'Likely need correction. Get eye exam.' },
    4: { vision:'6/12', label:'Moderate', advice:'Minor correction may be needed.' },
    5: { vision:'6/9', label:'Near Normal', advice:'Mostly fine. Annual checkup recommended.' },
    6: { vision:'6/6', label:'Normal (20/20)', advice:'Excellent vision! Continue 20-20-20 rule.' }
  };
  const r = results[row];
  el.innerHTML = r ? `
    <div class="alert-card ${row <= 2?'alert-danger':row<=4?'alert-warning':'alert-success'}">
      <div class="alert-icon">${row<=2?'âš ï¸':row<=4?'ğŸ”':'ğŸ‘ï¸'}</div>
      <div>
        <strong>${r.label} â€” Approx. ${r.vision}</strong><br>
        <span class="text-small">${r.advice}</span>
      </div>
    </div>
  ` : '';
}

// ===== MATERNAL CARE =====
function calcPregnancy() {
  const lmp = new Date(document.getElementById('lmpDate').value);
  if(!lmp || isNaN(lmp)) return;
  const today = new Date();
  const diff = Math.floor((today - lmp) / (1000*60*60*24));
  const weeks = Math.floor(diff/7);
  const days = diff % 7;
  
  if(weeks < 0 || weeks > 42) { alert('Invalid date. Please enter a valid LMP date.'); return; }

  document.getElementById('pregResult').style.display = 'block';
  document.getElementById('weekNum').textContent = weeks + ' Weeks ' + days + ' Days';
  const trimester = weeks < 13 ? '1st Trimester' : weeks < 27 ? '2nd Trimester' : '3rd Trimester';
  document.getElementById('trimester').textContent = trimester;

  const weeksEl = document.getElementById('pregWeeks');
  weeksEl.innerHTML = Array.from({length:40}, (_,i) => `
    <div class="week-dot ${i+1 < weeks?'completed':i+1===weeks?'current':''}" title="Week ${i+1}">${i+1}</div>
  `).join('');

  const tips = {
    1: 'ğŸ¥— Take folic acid daily. Avoid alcohol, tobacco.',
    2: 'ğŸ’¤ More rest needed. Nausea is normal.',
    3: 'ğŸ©º First ultrasound due. Track weight weekly.',
    default: `ğŸŒŸ You're doing great! Stay hydrated, eat well, rest often. Next checkup: schedule with your doctor.`
  };
  document.getElementById('pregTips').innerHTML = `
    <strong>Tips for ${trimester}:</strong><br>
    ${trimester === '1st Trimester' ? 'â€¢ Take folic acid 400mcg daily<br>â€¢ Avoid raw/undercooked food<br>â€¢ Stay hydrated<br>â€¢ Light exercise only' :
      trimester === '2nd Trimester' ? 'â€¢ Iron supplements as prescribed<br>â€¢ Calcium-rich foods<br>â€¢ Moderate exercise (30 min/day)<br>â€¢ Baby movements start ~18-20 weeks' :
      'â€¢ Rest frequently, sleep on left side<br>â€¢ Prepare hospital bag<br>â€¢ Pelvic floor exercises<br>â€¢ Attend all antenatal checkups'}
  `;
}

function updateBabyMilestones() {
  const months = parseInt(document.getElementById('babyMonths').value) || 0;
  const el = document.getElementById('milestonesResult');
  if(!el) return;
  
  const milestones = [
    { age:0, m:'Social smile, recognizes mother\'s voice, strong sucking reflex' },
    { age:2, m:'Cooing sounds, follows objects with eyes, holds head briefly' },
    { age:4, m:'Laughs out loud, reaches for objects, babbles' },
    { age:6, m:'Sits with support, recognizes familiar faces, transfers objects' },
    { age:9, m:'Crawls, pulls to stand, says "mama/dada"' },
    { age:12, m:'First steps, points at objects, 1-2 words vocabulary' },
    { age:18, m:'10+ words, stacks blocks, drinks from cup' },
    { age:24, m:'2-word phrases, runs, kicks ball, uses spoon' },
    { age:36, m:'Simple sentences, climbs stairs, knows colors' },
    { age:48, m:'Complex sentences, draws circles, dresses with help' }
  ];

  const current = milestones.filter(m => m.age <= months).slice(-1)[0];
  const next = milestones.find(m => m.age > months);
  
  el.innerHTML = `
    <div class="alert-card alert-success">
      <div class="alert-icon">âœ…</div>
      <div>
        <strong>Expected at ${months} months:</strong><br>
        <span class="text-small">${current?.m || 'Newborn stage â€” focus on feeding, warmth, and skin contact'}</span>
      </div>
    </div>
    ${next ? `
    <div class="alert-card alert-info" style="margin-top:12px">
      <div class="alert-icon">ğŸ”œ</div>
      <div>
        <strong>Coming at ~${next.age} months:</strong><br>
        <span class="text-small">${next.m}</span>
      </div>
    </div>
    ` : ''}
  `;
}

function initMaternalTips() {
  const el = document.getElementById('maternalTipsList');
  if(!el) return;
  const tips = [
    { icon:'ğŸ¥›', text:'Drink 10-12 glasses of water/day during pregnancy and breastfeeding' },
    { icon:'ğŸŒ¿', text:'Include green leafy vegetables for iron and folate' },
    { icon:'ğŸ§˜', text:'Prenatal yoga reduces labor pain and delivery complications' },
    { icon:'ğŸ˜´', text:'Sleep 8-9 hours. Use left-side sleeping after 5 months' },
    { icon:'ğŸ©º', text:'Attend all ANC checkups â€” minimum 4 during pregnancy' }
  ];
  el.innerHTML = tips.map(t => `
    <div class="alert-card alert-info" style="margin-bottom:8px">
      <div class="alert-icon">${t.icon}</div>
      <div class="text-small" style="line-height:1.6">${t.text}</div>
    </div>
  `).join('');
}

// ===== TIPS =====
function buildTips() {
  const todayIdx = new Date().getDate() % TIPS_DATA.length;
  const todayEl = document.getElementById('todayTip');
  if(todayEl) todayEl.textContent = TIPS_DATA[todayIdx].tip;

  const el = document.getElementById('tipsGrid');
  if(!el) return;
  el.innerHTML = TIPS_DATA.map(t => `
    <div class="feature-card">
      <span class="feat-icon">${t.icon}</span>
      <div class="feat-title">${t.title}</div>
      <div class="feat-desc">${t.tip}</div>
      <span class="feat-badge">${t.category}</span>
    </div>
  `).join('');
}

// ===== DISEASE TRENDS =====
function buildTrends() {
  buildOutbreakAlerts();
  updateTrend();
  buildPredictions();
  buildBulletins();
}

function buildOutbreakAlerts() {
  const el = document.getElementById('outbreakAlerts');
  if(!el) return;
  el.innerHTML = `
    <div class="alert-card alert-warning">
      <div class="alert-icon">ğŸ¦Ÿ</div>
      <div>
        <strong>Dengue Alert â€” Andhra Pradesh</strong><br>
        <span class="text-small">Rising dengue cases reported in Kurnool and Nellore districts this week. Use mosquito repellent, eliminate standing water. Cases: 127 this week (â†‘23%)</span>
      </div>
    </div>
    <div class="alert-card alert-info">
      <div class="alert-icon">ğŸ’§</div>
      <div>
        <strong>Cholera Advisory â€” Telangana</strong><br>
        <span class="text-small">Precautionary alert for rural areas. Drink only boiled water. 14 suspected cases reported. Investigation underway.</span>
      </div>
    </div>
  `;
}

function updateTrend() {
  const el = document.getElementById('trendBars');
  const labelsEl = document.getElementById('weekLabels');
  if(!el) return;
  const data = Array.from({length:8}, () => 20 + Math.floor(Math.random()*80));
  const weeks = ['W1','W2','W3','W4','W5','W6','W7','W8'];
  const maxVal = Math.max(...data);
  el.innerHTML = data.map((v,i) => `
    <div class="chart-bar" style="height:${v/maxVal*100}%;flex:1" data-val="${v}"></div>
  `).join('');
  if(labelsEl) labelsEl.innerHTML = weeks.map(w => `<span>${w}</span>`).join('');
}

function buildPredictions() {
  const el = document.getElementById('predictionResult');
  if(!el) return;
  el.innerHTML = `
    <div class="badge badge-orange" style="margin-bottom:12px">ğŸ“ˆ ARIMA Model Prediction</div>
    <div class="text-small" style="line-height:1.8">
      <strong>Next 2 weeks forecast:</strong><br>
      â€¢ Dengue: â†‘ <span style="color:#ef4444">+34%</span> in coastal areas<br>
      â€¢ Malaria: â†“ <span style="color:#00c853">-12%</span> (seasonal decrease)<br>
      â€¢ Influenza: â†’ <span style="color:#fbbf24">Stable</span><br>
      â€¢ Cholera: â†‘ <span style="color:#f97316">+18%</span> post-rain period<br><br>
      <span style="color:var(--text-secondary)">Model accuracy: 78% | Data: ICMR + WHO IDSP</span>
    </div>
  `;

  const distEl = document.getElementById('districtRisk');
  if(distEl) distEl.innerHTML = `
    <div class="text-small" style="line-height:2">
      ğŸ”´ <strong>High Risk:</strong> Kurnool, Nellore, Guntur<br>
      ğŸŸ¡ <strong>Moderate:</strong> Krishna, West Godavari<br>
      ğŸŸ¢ <strong>Low Risk:</strong> Vizag, Tirupati, Chittoor
    </div>
  `;
}

function buildBulletins() {
  const el = document.getElementById('diseaseBulletins');
  if(!el) return;
  const bulletins = [
    { title:'ICMR Weekly Disease Bulletin', date:'Feb 24, 2026', desc:'Seasonal influenza cases at expected levels. No novel strains detected.', badge:'ICMR' },
    { title:'WHO South-East Asia Health Alert', date:'Feb 20, 2026', desc:'Mpox surveillance ongoing. India status: low risk. Standard precautions recommended.', badge:'WHO' },
    { title:'State Health Department Notice', date:'Feb 22, 2026', desc:'Free vaccination drive for Measles-Rubella in all government schools next week.', badge:'State' }
  ];
  el.innerHTML = bulletins.map(b => `
    <div class="alert-card alert-info" style="margin-bottom:12px">
      <div style="flex:1">
        <div style="display:flex;justify-content:space-between;margin-bottom:6px">
          <strong>${b.title}</strong>
          <span class="badge badge-blue">${b.badge}</span>
        </div>
        <div class="text-small">${b.date} â€” ${b.desc}</div>
      </div>
    </div>
  `).join('');
}

// ===== WEATHER =====
function initWeather() { fetchWeather(); }

function fetchWeather() {
  // Simulate weather for Anantapur, AP
  const conditions = [
    { icon:'â˜€ï¸', temp:32, desc:'Sunny, Clear Sky', hum:45, wind:12, aqi:87 },
    { icon:'â›…', temp:28, desc:'Partly Cloudy', hum:62, wind:18, aqi:112 },
    { icon:'ğŸŒ§ï¸', temp:24, desc:'Light Rain', hum:85, wind:22, aqi:65 },
    { icon:'ğŸŒ¤ï¸', temp:30, desc:'Mostly Clear', hum:55, wind:15, aqi:95 }
  ];
  const c = conditions[Math.floor(Math.random()*conditions.length)];
  
  document.getElementById('weatherIcon').textContent = c.icon;
  document.getElementById('weatherTemp').textContent = c.temp + 'Â°C';
  document.getElementById('weatherDesc').textContent = c.desc + ' â€” Anantapur, AP';
  document.getElementById('humidity').textContent = c.hum + '% Humidity';
  document.getElementById('windSpeed').textContent = c.wind + ' km/h Wind';
  document.getElementById('airQuality').textContent = 'AQI ' + c.aqi + (c.aqi < 50?'(Good)':c.aqi<100?'(Moderate)':'(Poor)');
  
  buildWeatherAlerts(c);
  buildWeeklyForecast();
}

function buildWeatherAlerts(c) {
  const el = document.getElementById('weatherAlerts');
  if(!el) return;
  const alerts = [];
  if(c.temp > 35) alerts.push({ type:'danger', icon:'ğŸŒ¡ï¸', title:'Heat Stroke Alert', desc:'Temperature above 35Â°C. Avoid outdoor activity 12-4 PM. Drink ORS. Wear light cotton clothes.' });
  if(c.temp < 10) alerts.push({ type:'warning', icon:'â„ï¸', title:'Cold Wave Advisory', desc:'Low temperatures. Cover ears and extremities. Extra risk for elderly and babies.' });
  if(c.hum > 75) alerts.push({ type:'warning', icon:'ğŸ¦Ÿ', title:'Dengue Risk High', desc:'High humidity increases mosquito breeding. Use nets and repellent. Drain standing water.' });
  if(c.aqi > 150) alerts.push({ type:'danger', icon:'ğŸ˜·', title:'Poor Air Quality', desc:'AQI hazardous for sensitive groups. Wear N95 mask outdoors. Avoid outdoor exercise.' });
  if(c.aqi > 100 && c.aqi <= 150) alerts.push({ type:'warning', icon:'ğŸŒ«ï¸', title:'Moderate Air Quality', desc:'Reduce prolonged outdoor activity. Those with asthma should carry inhaler.' });
  
  alerts.push({ type:'info', icon:'ğŸ’§', title:'Hydration Reminder', desc:`Drink at least ${c.temp > 30 ? '3-4' : '2-3'} litres of water today. Dehydration risk is ${c.temp > 30 ? 'HIGH' : 'moderate'} today.` });
  
  el.innerHTML = alerts.map(a => `
    <div class="alert-card alert-${a.type}" style="margin-bottom:12px">
      <div class="alert-icon">${a.icon}</div>
      <div>
        <strong>${a.title}</strong><br>
        <span class="text-small">${a.desc}</span>
      </div>
    </div>
  `).join('');
}

function buildWeeklyForecast() {
  const el = document.getElementById('weeklyForecast');
  if(!el) return;
  const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
  const icons = ['â˜€ï¸','â›…','ğŸŒ§ï¸','â˜€ï¸','ğŸŒ¤ï¸','â›…','â˜€ï¸'];
  const temps = [32,28,24,30,31,29,33];
  el.innerHTML = `
    <div style="display:flex;gap:12px;flex-wrap:wrap">
      ${days.map((d,i) => `
        <div style="background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:12px 16px;text-align:center;flex:1;min-width:80px">
          <div class="text-small" style="color:var(--text-secondary)">${d}</div>
          <div style="font-size:1.8rem">${icons[i]}</div>
          <div style="font-weight:700;color:var(--brand-sky)">${temps[i]}Â°C</div>
          <div style="font-size:0.65rem;color:var(--text-secondary);margin-top:4px">${temps[i]>32?'âš ï¸ Hot':temps[i]<20?'â„ï¸ Cold':'âœ… Fine'}</div>
        </div>
      `).join('')}
    </div>
  `;
}

// ===== START =====
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
